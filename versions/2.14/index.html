
        <!DOCTYPE html>
        <html lang="en">
          <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SleekDB - PHP NoSQL Flat File Database</title>
  <link rel="stylesheet" type="text/css" href="/assets/app.css" />
  <link rel="stylesheet" type="text/css" href="/assets/normalize.css" />
  <link rel="stylesheet" href="/assets/highlighter/styles/darcula.css" />
  <script src="/assets/highlighter/highlight.pack.js"></script>
  <script src="https://unpkg.com/ionicons@4.3.0/dist/ionicons.js"></script>
  <!-- Search Engine -->
  <meta name="description" content="SleekDB is a simple flat file NoSQL like database implemented in PHP without any third-party dependencies that store data in plain JSON files." />
  <meta
    name="image"
    content="https://sleekdb.github.io/assets/SleekDB_Thumbnail.png"
  />
  <!-- Schema.org for Google -->
  <meta itemprop="name" content="SleekDB - PHP NoSQL Flat File Database" />
  <meta itemprop="description" content="SleekDB is a simple flat file NoSQL like database implemented in PHP without any third-party dependencies that store data in plain JSON files." />
  <meta
    itemprop="image"
    content="https://sleekdb.github.io/assets/SleekDB_Thumbnail.png"
  />
  <!-- Twitter -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="SleekDB - PHP NoSQL Flat File Database" />
  <meta name="twitter:description" content="SleekDB is a simple flat file NoSQL like database implemented in PHP without any third-party dependencies that store data in plain JSON files." />
  <meta name="twitter:site" content="@rakibtg" />
  <meta name="twitter:creator" content="@rakibtg" />
  <!-- Open Graph general (Facebook, Pinterest & Google+) -->
  <meta name="og:title" content="SleekDB - PHP NoSQL Flat File Database" />
  <meta name="og:description" content="SleekDB is a simple flat file NoSQL like database implemented in PHP without any third-party dependencies that store data in plain JSON files." />
  <meta
    name="og:image"
    content="https://sleekdb.github.io/assets/SleekDB_Thumbnail.png"
  />
  <meta name="og:url" content="https://sleekdb.github.io/" />
  <meta name="og:site_name" content="SleekDB - PHP NoSQL Flat File Database" />
  <meta name="og:locale" content="en_US" />
  <meta name="og:type" content="website" />
</head>

        <body>
        
        <div class="container">
          <div class="header">
            <div class="toggler" title="Toggle sidebar">
  <ion-icon name="menu"></ion-icon>
</div>
<div class="left_header">
  <div class="logo">
    <a href="/">SLEEK<span>DB</span></a>
  </div>
</div>
<div class="right_header header_menu">
  <a
    href="#/versions"
    title="Find all versions of SleekDB"
    class="menu gotoblock"
    ><ion-icon class="hide-sm" name="pricetag"></ion-icon> 2.14</a
  >
  <a
    class="menu"
    href="https://github.com/rakibtg/SleekDB"
    target="_blank"
    title="SleekDB is open-source. See the source code in GitHub"
    ><ion-icon name="logo-github"></ion-icon>
    <span class="hide-sm">GitHub</span></a
  >
  <a
    class="menu"
    href="https://twitter.com/rakibtg"
    target="_blank"
    title="Follow me on twitter for SleekDB updates."
    ><ion-icon name="logo-twitter"></ion-icon>
    <span class="hide-sm">@rakibtg</span></a
  >
  <!-- <a
    class="menu gotoblock"
    href="/#/support"
    target="_blank"
    title="Learn more on supporting this open source database."
    ><ion-icon name="heart"></ion-icon> <span class="hide-sm">Support</span></a
  > -->
</div>

          </div>
          <div class="app">
            <div class="left">
              <div id="docs_menu_sidebar">
  
          <a class="gotoblock" href="#/home">
            <ion-icon name="home"></ion-icon> 
            Home
        </a>
          <a class="gotoblock" href="#/features">
            <ion-icon name="filing"></ion-icon> 
            Features
        </a>
          <a class="gotoblock" href="#/installation">
            <ion-icon name="play"></ion-icon> 
            Installation
        </a>
          <a class="gotoblock" href="#/getting-started">
            <ion-icon name="rocket"></ion-icon> 
            Getting Started
        </a>
          <a class="gotoblock" href="#/managing-store">
            <ion-icon name="cube"></ion-icon> 
            Managing Store
        </a>
          <a class="gotoblock" href="#/configurations">
            <ion-icon name="construct"></ion-icon> 
            Configurations
        </a>
          <a class="gotoblock" href="#/insert-data">
            <ion-icon name="create"></ion-icon> 
            Insert Data
        </a>
          <a class="gotoblock" href="#/fetch-data">
            <ion-icon name="book"></ion-icon> 
            Fetch Data
        </a>
          <a class="gotoblock" href="#/edit-data">
            <ion-icon name="hammer"></ion-icon> 
            Edit Data
        </a>
          <a class="gotoblock" href="#/delete-data">
            <ion-icon name="trash"></ion-icon> 
            Delete Data
        </a>
          <a class="gotoblock" href="#/criteria">
            <ion-icon name="checkmark-circle-outline"></ion-icon> 
            $criteria
        </a>
          <a class="gotoblock" href="#/query-builder">
            <ion-icon name="build"></ion-icon> 
            QueryBuilder
        </a>
          <a class="gotoblock" href="#/cache-management">
            <ion-icon name="copy"></ion-icon> 
            Cache Management
        </a>
          <a class="gotoblock" href="#/join-stores">
            <ion-icon name="git-merge"></ion-icon> 
            Join Stores
        </a>
          <a class="gotoblock" href="#/query">
            <ion-icon name="flash"></ion-icon> 
            Query
        </a>
          <a class="gotoblock" href="#/dates">
            <ion-icon name="alarm"></ion-icon> 
            Working with Dates
        </a>
          <a class="gotoblock" href="#/searching">
            <ion-icon name="search"></ion-icon> 
            Searching
        </a>
          <a class="gotoblock" href="#/execution-order">
            <ion-icon name="git-network"></ion-icon> 
            Order of Execution
        </a>
          <a class="gotoblock" href="#/advanced">
            <ion-icon name="flame"></ion-icon> 
            Advanced
        </a>
          <a class="gotoblock" href="#/complete-examples">
            <ion-icon name="color-wand"></ion-icon> 
            Complete Examples
        </a>
          <a class="gotoblock" href="#/cache">
            <ion-icon name="logo-buffer"></ion-icon> 
            Cache
        </a>
          <a class="gotoblock" href="#/reference">
            <ion-icon name="albums"></ion-icon> 
            Reference
        </a>
          <a class="gotoblock" href="#/release-notes">
            <ion-icon name="megaphone"></ion-icon> 
            Release Notes
        </a>
          <a class="gotoblock" href="#/contributing">
            <ion-icon name="heart"></ion-icon> 
            Contributing
        </a>
          <a class="gotoblock" href="#/contact">
            <ion-icon name="mail"></ion-icon> 
            Contact
        </a>
          <a class="gotoblock" href="#/versions">
            <ion-icon name="pricetag"></ion-icon> 
            Versions
        </a>
</div>
            </div>
            <div class="right" id="layoutRight">
              
          <div class="intro" id="block_home">
            <h1>SleekDB - A NoSQL Database made using PHP</h1>
<p>SleekDB is a simple flat file NoSQL like database implemented in PHP without any third-party dependencies that store data in plain JSON files.</p>
<p>It is not comparable with databases like Sqlite, MySQL, PostgreSQL and MariaDB because they are relational databases! SleekDB is a NoSQL database and therefore more comparable with for example MongoDB.</p>
<p>It is not designed to handle heavy-load IO operations, it is designed to have a simple solution where all we need a database for is managing a few gigabytes of data. You can think of it as a database for low to medium operation loads.</p>
<h2>üòé Manage Static Data With Ease</h2>
<p>SleekDB works great as the database engine for low to medium traffic websites. It makes simple database effortless.</p>
<h2>üìù Your Dynamic Website Become Static</h2>
<p>SleekDB will cache all query data by default, in a way that would make any dynamic site as fast as static sites.</p>
<h2>üóÑ Flat File Database</h2>
<p>SleekDB is also a flat file database, but instead of a single file it stores data in multiple JSON files. That allows it to have a better concurrency support compared to fully FlatFile database systems. SleekDB can be compared with other flat file database systems because the final query output will be cached and later reused from a single file instead of traversing all the available files.</p>
<h2>ü•≥ You Are Not Alone!</h2>
<p>SleekDB is being used with many websites and applications which are in production right now. The core team consists of two developers. They actively maintain, contribute to, and develop the SleekDB Database.</p>
<h2>üëã Say Hi!</h2>
<p>Join our <a href="https://discord.gg/WJGqUFPtZw" target="_blank" rel="noopener nofollow" class="btn btn-primary btn-block">Discord</a> channel. We would love to know about you and your feedbacks.</p>
            <div class="editlink" 
              file="home.md" 
              version="2.14">
            </div>
          </div>
        
          <div class="intro" id="block_features">
            <h1>Features</h1>
<h2>Installing SleekDB</h2>
<ul>
<li>
<h1>‚ö° Lightweight &amp; Fast</h1>
<p>Stores data in plain-text utilizing JSON format, no binary conversion needed to store or fetch the data. Default query cache layer.</p>
</li>
<li>
<h1>üîÜ Schema free data storage</h1>
<p>SleekDB does not require any schema, so you can insert any types of data you want.</p>
</li>
<li>
<h1>üîç Query on nested properties</h1>
<p>As it supports schema free data, so you can filter and use conditions on nested properties of the JSON documents!</p>
<p>If you write this where clause:</p>
<pre><code class="language-php">where( 'post.author.role', '=', 'admin' )</code></pre>
<p>SleekDB will look for data at:</p>
<pre><code class="language-json">{
"post": {
  "author": {
    "role": "admin"
  }
}
}</code></pre>
</li>
<li>
<h1>‚ú® Dependency free, only needs PHP to run</h1>
<p>Supports PHP 7+. Requires no third-party plugins or software.</p>
</li>
<li>
<h1>üöÄ Default caching layer</h1>
<p>SleekDB will serve data from cache by default and regenerate cache automatically! Query results will be cached and later reused from a single file instead of traversing all the available files.</p>
</li>
<li>
<h1>üåà Rich Conditions and Filters</h1>
<p>Use multiple conditional comparisons, text search, sorting on multiple properties and nested properties.</p>
<table>
<tbody>
  <tr>
    <td valign="top">
      <ul>
        <li>where</li>
        <li>orWhere</li>
        <li>select</li>
        <li>except</li>
        <li>in</li>
        <li>not in</li>
      </ul>
    </td>
    <td valign="top">
      <ul>
        <li>join</li>
        <li>like</li>
        <li>sort</li>
        <li>skip</li>
        <li>orderBy</li>
        <li>update</li>
      </ul>
    </td>
    <td valign="top">
      <ul>
        <li>limit</li>
        <li>search</li>
        <li>distinct</li>
        <li>exists</li>
        <li>first</li>
        <li>delete</li>
      </ul>
    </td>
    <td valign="top">
      <ul>
        <li>like</li>
        <li>not like</li>
        <li>between</li>
        <li>not between</li>
        <li>group by</li>
        <li>having</li>
      </ul>
    </td>
  </tr>
</tbody>
</table>
</li>
<li>
<h1>üëç Process data on demand</h1>
<p>SleekDB does not require any background process or network protocol in order to process data when you use it in a PHP project. All data for a query will be fetched at runtime within the same PHP process.</p>
</li>
<li>
<h1>üòç Runs everywhere</h1>
<p>Runs perfectly on shared-servers or VPS too.</p>
</li>
<li>
<h1>üç∞ Easy to learn and implement</h1>
<p>SleekDB provides a very simple elegant API to handle all of your data.</p>
</li>
<li>
<h1>üç∞ Easily import/export or backup data.</h1>
<p>SleekDB use files to store information. That makes tasks like backup, import and export very easy.</p>
</li>
<li>
<h1>üí™ Actively maintained</h1>
<p>SleekDB is created by <a rel="noopener nofollow" href="https://twitter.com/rakibtg" target="_blank">@rakibtg</a> who is using it in various types of applications which are in production right now. Our other contributor and active maintainer is <a rel="noopener nofollow" href="https://www.goodsoft.de" target="_blank">Timucin</a> who is making SleekDB much better in terms of code quality and new features.</p>
</li>
<li>
<h1>üíå Support</h1>
<p>For support and other requirements <a class="gotoblock" href="/#/contact">contact</a>.</p>
</li>
</ul>
            <div class="editlink" 
              file="features.md" 
              version="2.14">
            </div>
          </div>
        
          <div class="intro" id="block_installation">
            <h1>Installation</h1>
<p>To use SleekDB make sure that you have PHP up and running in your system, and SleekDB has write and/or read permission.</p>
<h2>Requirements</h2>
<ul>
<li>PHP &gt;= 7.0</li>
<li>ext-json</li>
<li>ext-mbstring</li>
</ul>
<h2>Composer Installation (recommended)</h2>
<p>To install SleekDB using composer, open a terminal, cd into your project root directory where &quot;composer.json&quot; file lives and run this:</p>
<pre><code class="language-sh">composer require rakibtg/sleekdb</code></pre>
<p>SleekDB should be auto loaded into your app using the composer.
Find SleekDB on <strong><a rel="noopener nofollow" href="https://packagist.org/packages/rakibtg/sleekdb" target="_blank">packagist</a></strong>.</p>
<h2>Install Manually (without composer)</h2>
<ul>
<li><a rel="noopener nofollow" href=" https://github.com/rakibtg/SleekDB/archive/master.zip">Download</a> the latest version and extract the ZIP file inside your project directory.</li>
<li>
<p>Import the SleekDB.php file where you want to use SleekDB.</p>
<p>Example:</p>
<pre><code class="language-php">require_once "../SleekDB/Store.php";</code></pre>
</li>
</ul>
<p>To download older versions please check the <a rel="noopener nofollow" target="_blank" title="Click here to download old versions" href="https://github.com/rakibtg/SleekDB/releases">releases</a>.</p>
<h2>Using dev version (Not recommended)</h2>
<p>We do a lot of experiments on the dev branch, which are not properly documented and the API will not be consistence in some cases. Use from <code>dev</code> branch if you have any specific reason or if you want play around with it.</p>
<pre><code class="language-sh">composer require rakibtg/sleekdb dev-dev</code></pre>
            <div class="editlink" 
              file="installation.md" 
              version="2.14">
            </div>
          </div>
        
          <div class="intro" id="block_getting-started">
            <h1>Getting Started</h1>
<p>Getting started with SleekDB is super easy. We keep data in a &quot;store&quot;, which is similar to MySQL &quot;table&quot; or MongoDB &quot;collection&quot;. Each store contains multiple documents, which are equivalent to rows in SQL based relational database.</p>
<blockquote>
<p>As an example for a blog it can be something like this: <strong>posts</strong> &gt; <strong>documents</strong></p>
</blockquote>
<p>Here &quot;posts&quot; is a store and &quot;documents&quot; are a collection of JSON files that contains all the blog posts.</p>
<h2>üìå Important Note</h2>
<blockquote>
<p>With the release of version 2.0 we have updated the internal implementation.<br/>We introduce a new API and the old SleekDB object has to retire!<br/>Although, we are providing downwards compatibility in this version, but will remove the old SleekDB object with version 3.0.<br />This documentation focus on the new API.</p>
</blockquote>
<h2>Query Life Cycle</h2>
<p>Each query will follow the below steps or execution life cycle.</p>
<ol>
<li>
<h1>Store</h1>
<p>The <code>Store</code> class is the first, and in most cases also the only part you need to come in contact with.</p>
</li>
<li>
<h1>Query Builder</h1>
<p>The <code>QueryBuilder</code> class is used to prepare a query. To execute it <code>getQuery</code> method can be used.</p>
</li>
<li>
<h1>Query</h1>
<p>At this step the <code>Query</code> class contains all information needed to execute the query.</p>
</li>
<li>
<h1>Cache</h1>
<p>The <code>Cache</code> class handles everything regarding caching. It will decide when to cache or not to cache.</p>
</li>
</ol>
<h2>First Example - Insert and Fetch Data</h2>
<ol>
<li>
<p>To begin with, we need a valid &quot;path&quot; where we want to store our data.<br/>Both absolute and relative paths are supported.</p>
<pre><code class="language-php">$databaseDirectory = __DIR__ . "/myDatabase";</code></pre>
</li>
<li>
<p>Once we have the data directory, we can initialize the store.<br/>If the store doesn't exist it will be created automatically.</p>
<pre><code class="language-php">$newsStore = new \SleekDB\Store("news", $databaseDirectory);</code></pre>
<p>Optionally you can <strong>pass a configuration array as a third parameter</strong>.<br/>
Read more about <a class="gotoblock" href="/#/configurations">configurations</a>.</p>
</li>
<li>
<p>Inserting your first news article using the <code>insert</code> method. The article has to be an array.</p>
<pre><code class="language-php">$article = [
 "title" =&gt; "Google Pixel XL",
 "about" =&gt; "Google announced a new Pixel!",
 "author" =&gt; [
   "avatar" =&gt; "profile-12.jpg",
   "name" =&gt; "Foo Bar"
 ]
];
$results = $newsStore-&gt;insert($article);</code></pre>
<p>The results variable will contain all the inserted data and with their <code>_id</code> property which will be unique and added automatically.</p>
</li>
<li>
<p>To find all news articles we will use the <code>findAll</code> method.</p>
<pre><code class="language-php">$allNews = $newsStore-&gt;findAll();

print_r($allNews);</code></pre>
</li>
</ol>
<blockquote>
<p>üéâ Congrats! You just inserted your first data into a SleekDB store and also learned how to fetch them.</p>
</blockquote>
            <div class="editlink" 
              file="getting-started.md" 
              version="2.14">
            </div>
          </div>
        
          <div class="intro" id="block_managing-store">
            <h1>Stores</h1>
<p>Store is a simple directory where SleekDB will write all your data in JSON documents. &quot;Store&quot; is similar with the idea of &quot;Table&quot; in MySQL or &quot;Collection&quot; in MongoDB. You don't need to create a &quot;store&quot; directory manually.</p>
<h2>Your first store</h2>
<p>To start working with a store we need to create an object.</p>
<p>Later, we can use that object to work with the data in that store.</p>
<ul>
<li>
<p>Creating a store</p>
<pre><code class="language-php">use SleekDB\Store;
$newsStore = new Store('news', $dataDir);</code></pre>
</li>
<li>
<p>Creating an additional store; assuming we are working on a community platform, where need a users store too.</p>
<pre><code class="language-php">$userStore = new Store('users', $dataDir);</code></pre>
</li>
<li>
<p>Another store to keep all the posts shared by the user.</p>
<pre><code class="language-php">$postStore = new Store('posts', $dataDir);</code></pre>
</li>
<li>
<p>Creating a new user</p>
<pre><code class="language-php">$userStore-&gt;insert([
  'name' =&gt; 'Mike Doe',
  'email' =&gt; 'miked@example.com',
  'avatar' =&gt; [
    'sm' =&gt; "/img-sm.jpg",
    'lg' =&gt; "/img-lg.jpg"
  ]
]);</code></pre>
</li>
</ul>
<p>In the above example we have created a new user to understand the purpose of a store in SleekDB. In this documentation later we will see more examples on this.</p>
<h2>Deleting A Store</h2>
<p>To delete a store use the <code>deleteStore()</code> method. It deletes a store and wipes all the data and cache it contains.</p>
<p>Example:</p>
<pre><code class="language-php">$userStore-&gt;deleteStore();</code></pre>
            <div class="editlink" 
              file="managing-store.md" 
              version="2.14">
            </div>
          </div>
        
          <div class="intro" id="block_configurations">
            <h1>Configurations</h1>
<p>SleekDB allows a few configuration options, which are</p>
<ul>
<li><a class="gotoblock" href="#/configurations#auto_cache">auto_cache</a></li>
<li><a class="gotoblock" href="#/configurations#cache_lifetime">cache_lifetime</a></li>
<li><del><a class="gotoblock" href="#/configurations#timeout">timeout</a></del> <br/>
( üö® Deprecated since version 2.12, set it to <code>false</code> and if needed use <a href="https://www.php.net/manual/en/function.set-time-limit.php" target="_blank" rel="noopener nofollow">set_time_limit()</a> in your own code! )</li>
<li><a class="gotoblock" href="#/configurations#primary_key">primary_key</a></li>
<li><a class="gotoblock" href="#/configurations#search">search</a></li>
</ul>
<p>They are store wide, which means they will be used on every query, if not changed on a query by query base.</p>
<h2>Using Custom Configuration</h2>
<p>You can pass the configurations array as a third parameter when initializing the Store object:</p>
<pre><code class="language-php">// default configurations
$configuration = [
  "auto_cache" =&gt; true,
  "cache_lifetime" =&gt; null,
  "timeout" =&gt; 120, // deprecated! Set it to false!
  "primary_key" =&gt; "_id",
  "search" =&gt; [
    "min_length" =&gt; 2,
    "mode" =&gt; "or",
    "score_key" =&gt; "scoreKey",
    "algorithm" =&gt; Query::SEARCH_ALGORITHM["hits"]
  ]
];
$newsStore = new \SleekDB\Store("news", $dataDir, $configuration);</code></pre>
<p>Let's get familiar with the available configuration options.</p>
<h2 id="configurations-auto_cache">auto_cache</h2>
<p>The <code>auto_cache</code> is set to <code>true</code> by default!</p>
<p>This tells SleekDB to use the build in caching system.</p>
<p>To disable build in caching set <code>auto_cache</code> to <code>false</code> in the config array.</p>
<p>Note that you can manually manage caching on a query by query base with methods that SleekDB provides.
Available caching method's are:</p>
<ul>
<li><code>QueryBuilder-&gt;regenerateCache()</code></li>
<li><code>QueryBuilder-&gt;useCache()</code></li>
<li><code>QueryBuilder-&gt;disableCache()</code></li>
</ul>
<h2 id="configurations-cache_lifetime">cache_lifetime</h2>
<p>The <code>cache_lifetime</code> is set to <code>null</code> by default!</p>
<p>Can be an <code>int &gt;= 0</code>, that specifies the lifetime in seconds, or <code>null</code> to define that there is no lifetime.</p>
<p>This specifies the default cache time to live store wide.</p>
<p>If set to null the cache files made with that store instance will have no lifetime and will be regenerated on every insert/update/delete operation.</p>
<blockquote>
<p><code>0</code> means infinite lifetime.</p>
</blockquote>
<p>Note that you can specify the cache lifetime on a query by query base by using the useCache method of the QueryBuilder and pass a lifetime.</p>
<ul>
<li><code>QueryBuilder-&gt;useCache($lifetime)</code></li>
</ul>
<blockquote>
<p>Note: You will find more details on caching at <a class="gotoblock" href="/#/cache-management">Cache Management</a></p>
</blockquote>
<h2 id="configurations-timeout">timeout</h2>
<blockquote>
<h3>üö® Deprecated since version 2.12, set it to <code>false</code> and if needed use <a href="https://www.php.net/manual/en/function.set-time-limit.php" target="_blank" rel="noopener nofollow">set_time_limit()</a> in your own code!</h3>
</blockquote>
<p>Set timeout value. Default value is <code>120</code> seconds.
It uses the build in php <a href="https://www.php.net/manual/en/function.set-time-limit.php" target="_blank" rel="noopener nofollow">set_time_limit()</a> function.<br/>
You can set the timeout option to <code>false</code> if you do not want to use or can not use set_time_limit.</p>
<h2 id="configurations-primary_key">primary_key</h2>
<p>Set the primary key into any string you want.<br/>
SleekDB will then use that key instead of the default <code>_id</code> key.</p>
<h2 id="configurations-search">search</h2>
<p>On this documentation page we will provide you a brief description regarding the configuration options.</p>
<blockquote>
<p>Note: You will find more on searching at <a class="gotoblock" href="#/searching">Searching</a></p>
</blockquote>
<h3>min_length</h3>
<p>It has to be an <code>integer</code> &gt; 0.<br/>
The minimum length of a word within the search query that will be used for searching.</p>
<h3>mode</h3>
<p>Has to be a <code>string</code>.<br/>
SleekDB provides two modes.</p>
<ul>
<li>&quot;or&quot; </li>
<li>&quot;and&quot;</li>
</ul>
<h3>score_key</h3>
<p>Can be a <code>string</code> or <code>null</code>.<br/>
If this configuration is <code>null</code> no field containing the score will be applied to the documents.<br/>
If it is a <code>string</code> a new field with the specified field name will be applied to every document, which will contain the search score and can be used to for example sort the documents.</p>
<h3>algorithm</h3>
<p>SleekDB provides 4 search algorithms. <code>hits</code>, <code>hits_prioritize</code>, <code>prioritize</code>, <code>prioritize_position</code><br/>
These algorithms change the score generation.<br/>
They are available as a <strong>constant of the <code>Query</code> class</strong>.</p>
<p>Example:</p>
<pre><code class="language-php">Query::SEARCH_ALGORITHM["hits"] // default</code></pre>
            <div class="editlink" 
              file="configurations.md" 
              version="2.14">
            </div>
          </div>
        
          <div class="intro" id="block_insert-data">
            <h1>Insert Data</h1>
<p>To insert data first you make a PHP array, and simply insert that array into a store.</p>
<h2>Brief repetition of Store object creation</h2>
<p>For a more detailed documentation on <code>Store</code> object creation refer to the corresponding <a class="gotoblock" href="#/managing-store">&quot;Managing Store&quot; documentation</a>.</p>
<pre><code class="language-php">use SleekDB\Store;
$userStore = new Store('users', __DIR__ . "/database");</code></pre>
<h2>Summary</h2>
<ul>
<li><a class="gotoblock" href="#/insert-data#insert">insert</a></li>
<li><a class="gotoblock" href="#/insert-data#insertMany">insertMany</a></li>
<li><a class="gotoblock" href="#/insert-data#updateOrInsert">updateOrInsert</a></li>
<li><a class="gotoblock" href="#/insert-data#updateOrInsertMany">updateOrInsertMany</a></li>
</ul>
<h2 id="insert-data-insert">Insert a single document</h2>
<pre><code class="language-php">function insert(array $data): array</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$data: array</h1>
<p>One document that will be insert into the Store</p>
<ul>
<li>[&quot;name&quot; =&gt; &quot;Josh&quot;, &quot;age&quot; =&gt; 23, &quot;city&quot; =&gt; &quot;london&quot;]</li>
</ul>
</li>
</ol>
<h3>Return value</h3>
<p>Returns the inserted document as an <code>array</code> including the automatically generated and unique <code>_id</code> property.</p>
<h3>Example</h3>
<pre><code class="language-php">// Prepare a PHP array to insert.
$user = [
    'name' =&gt; 'Kazi Hasan',
    'products' =&gt; [
        'totalSaved' =&gt; 19,
        'totalBought' =&gt; 27
    ],
    'location' =&gt; [
        'town' =&gt; 'Nagar',
        'city' =&gt; 'Dhaka',
        'country' =&gt; 'Bangladesh'
    ]
];
// Insert the data.
$user = $userStore-&gt;insert($user);</code></pre>
<p><br/></p>
<h2 id="insert-data-insertMany">Insert multiple documents</h2>
<pre><code class="language-php">function insertMany(array $data): array</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$data: array</h1>
<p>Multiple documents that will be insert into the Store</p>
<ul>
<li>[ [&quot;name&quot; =&gt; &quot;Josh&quot;, &quot;age&quot; =&gt; 23], [&quot;name&quot; =&gt; &quot;Mike&quot;, &quot;age&quot; =&gt; 19], ... ]</li>
</ul>
</li>
</ol>
<h3>Return value</h3>
<p>Returns the inserted documents in an <code>array</code> including their automatically generated and unique <code>_id</code> property.</p>
<h3>Example</h3>
<pre><code class="language-php">// Prepare users data.
$users = [
    [
        'name' =&gt; 'Russell Newman',
        'products' =&gt; [
            'totalSaved' =&gt; 5,
            'totalBought' =&gt; 3
        ],
        'location' =&gt; [
            'town' =&gt; 'Andreas Ave',
            'city' =&gt; 'Maasdriel',
            'country' =&gt; 'England'
        ]
    ],
    [
        'name' =&gt; 'Willard Bowman',
        'products' =&gt; [
            'totalSaved' =&gt; 0,
            'totalBought' =&gt; 0
        ],
    ],
    [
        'name' =&gt; 'Tommy Mendoza',
        'products' =&gt; [
            'totalSaved' =&gt; 172,
            'totalBought' =&gt; 54
        ],
    ],
    [
        'name' =&gt; 'Joshua Edwards',
        'phone' =&gt; '(382)-450-8197'
    ]
];
// Insert all data.
$users = $userStore-&gt;insertMany($users);</code></pre>
<h2 id="insert-data-updateOrInsert">updateOrInsert()</h2>
<p>Update or insert one document.<br/>
This method is especially fast because it uses the _id to update or insert the document directly instead of traversing through all documents.</p>
<pre><code class="language-php">public function updateOrInsert(array $data, bool $autoGenerateIdOnInsert = true): array</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$data: array</h1>
<p>Document to update or insert.</p>
</li>
<li>
<h1>$autoGenerateIdOnInsert: bool</h1>
<p>Default: <code>true</code><br/>
If <code>false</code> and <strong>the document has a _id</strong>, that does not already exist (insert), the _id will be to insert the new document, an auto-generated _id will be used otherwise.</p>
</li>
</ol>
<h3>Return value</h3>
<p>Returns <code>updated / inserted document</code>.</p>
<h3>Example 1</h3>
<p>Update or Insert a user with _id = 23, apply an auto-generated _id if it is an insert.</p>
<pre><code class="language-php">$user = [
    "_id" =&gt; 23,
    "name" =&gt; "John",
    ...
];
$userStore-&gt;updateOrInsert($user);</code></pre>
<h3>Example 2</h3>
<p>Update or Insert a user with _id = 23.</p>
<pre><code class="language-php">$user = [
    "_id" =&gt; 23,
    "name" =&gt; "John",
    ...
];
$userStore-&gt;updateOrInsert($user, false);</code></pre>
<h3>Example 3</h3>
<p>Update or Insert a user with no _id.</p>
<pre><code class="language-php">$user = [
    "name" =&gt; "John",
    ...
];
$userStore-&gt;updateOrInsert($user);</code></pre>
<h2 id="insert-data-updateOrInsertMany">updateOrInsertMany()</h2>
<p>Update or insert multiple documents.<br/>
This method is especially fast because it uses the _id to update or insert the documents directly instead of traversing through all documents.</p>
<pre><code class="language-php">public function updateOrInsertMany(array $data, bool $autoGenerateIdOnInsert = true): array</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$data: array</h1>
<p>Documents to update or insert.</p>
</li>
<li>
<h1>$autoGenerateIdOnInsert: bool</h1>
<p>Default: <code>true</code><br/>
If <code>false</code> and <strong>a document has a _id</strong>, that does not already exist (insert), the _id will be to insert the new document, an auto-generated _id will be used otherwise.</p>
</li>
</ol>
<h3>Return value</h3>
<p>Returns <code>updated / inserted documents</code>.</p>
<h3>Example 1</h3>
<p>Update or Insert multiple users and apply auto-generated _id's on inserts.</p>
<pre><code class="language-php">$users = [
    [
        "_id" =&gt; 23,
        "name" =&gt; "John",
        ...
    ],
    [
        "_id" =&gt; 25,
        "name" =&gt; "Max",
        ...
    ],
    [
        "name" =&gt; "Lisa",
        ...
    ]
    ...
];
$userStore-&gt;updateOrInsertMany($users);</code></pre>
<h3>Example 2</h3>
<p>Update or Insert a users with their _id's.</p>
<pre><code class="language-php">$users = [
    [
        "_id" =&gt; 23,
        "name" =&gt; "John",
        ...
    ],
    [
        "_id" =&gt; 25,
        "name" =&gt; "Max",
        ...
    ],
    [
        "name" =&gt; "Lisa", // &lt;-- will get auto-generated _id
        ...
    ]
    ...
];
$userStore-&gt;updateOrInsertMany($users, false);
// Lisa will get a auto-generated _id, because there is no _id in the document!</code></pre>
            <div class="editlink" 
              file="insert-data.md" 
              version="2.14">
            </div>
          </div>
        
          <div class="intro" id="block_fetch-data">
            <h1>Fetch Data</h1>
<p>To get data from the store SleekDB provides some simple yet powerful methods.</p>
<blockquote>
<p>‚ÑπÔ∏è If you need to make more complex queries look into <a class="gotoblock" href="/#/query-builder">QueryBuilder</a>.</p>
</blockquote>
<h2>Brief repetition of Store object creation</h2>
<p>For a more detailed documentation on <code>Store</code> object creation refer to the corresponding <a class="gotoblock" href="#/managing-store">&quot;Managing Store&quot; documentation</a>.</p>
<pre><code class="language-php">use SleekDB\Store;
$newsStore = new Store('news', __DIR__ . "/database");</code></pre>
<h2>Summary</h2>
<ul>
<li><a class="gotoblock" href="#/fetch-data#findAll">findAll</a></li>
<li><a class="gotoblock" href="#/fetch-data#findById">findById</a></li>
<li><a class="gotoblock" href="#/fetch-data#findBy">findBy</a></li>
<li><a class="gotoblock" href="#/fetch-data#findOneBy">findOneBy</a></li>
<li><a class="gotoblock" href="#/fetch-data#count">count</a></li>
</ul>
<h2 id="fetch-data-findAll">Get all documents</h2>
<pre><code class="language-php">function findAll(array $orderBy = null, int $limit = null, int $offset = null): array</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$orderBy: array</h1>
<p>Sort the result by one or multiple fields.</p>
<ul>
<li>[&quot;name&quot; =&gt; &quot;asc&quot;]</li>
<li>[&quot;name&quot; =&gt; &quot;asc&quot;, &quot;age&quot; =&gt; &quot;desc&quot;]</li>
</ul>
</li>
<li>
<h1>$limit: int</h1>
<p>Limit the result to a specific amount.</p>
</li>
<li>
<h1>$offset: offset</h1>
<p>Skip a specific amount of documents.</p>
</li>
</ol>
<h3>Return value</h3>
<p>Returns either an <code>array containing all documents</code> of that store or an <code>empty array</code> if there are no documents.</p>
<h3>Example</h3>
<pre><code class="language-php">$allNews = $newsStore-&gt;findAll();</code></pre>
<h4>Example result</h4>
<pre><code>[["_id" =&gt; 12, "title" =&gt; "We love SleekDB"], ["_id" =&gt; 14, "title" =&gt; "NoSQL with just PHP"], ...]</code></pre>
<p><br/></p>
<h2 id="fetch-data-findById">Get a single document with its _id</h2>
<p>With this method SleekDB doesn't traverse through all files. Instead, it accesses the file directly, what makes this method especially fast.</p>
<pre><code class="language-php">function findById(int|string $id): array|null</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$id: int|string</h1>
<p>The _id of a document located in the store.</p>
</li>
</ol>
<h3>Return value</h3>
<p>Returns <code>one document</code> or <code>null</code> if document could not be found.</p>
<h3>Example</h3>
<pre><code class="language-php">$news = $newsStore-&gt;findById(12);</code></pre>
<h4>Example result</h4>
<pre><code>["_id" =&gt; 12, "title" =&gt; "SleekDB is the Best", ...]</code></pre>
<p><br/></p>
<h2 id="fetch-data-findBy">Get one or multiple documents</h2>
<pre><code class="language-php">function findBy(array $criteria, array $orderBy = null, int $limit = null, int $offset = null): array</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$criteria: array</h1>
<p>One or multiple where conditions.<br/>
Visit the <a class="gotoblock" href="#/criteria">$criteria</a> documentation page to learn more on how to define conditions.</p>
</li>
<li>
<h1>$orderBy: array</h1>
<p>Sort the result by one or multiple fields.</p>
<ul>
<li>[&quot;name&quot; =&gt; &quot;asc&quot;]</li>
<li>[&quot;name&quot; =&gt; &quot;asc&quot;, &quot;age&quot; =&gt; &quot;desc&quot;]</li>
</ul>
</li>
<li>
<h1>$limit: int</h1>
<p>Limit the result to a specific amount.</p>
</li>
<li>
<h1>$offset: offset</h1>
<p>Skip a specific amount of documents.</p>
</li>
</ol>
<h3>Return value</h3>
<p>Returns found <code>documents in an array</code> or <code>an empty array</code> if nothing is found.</p>
<h3>Example 1</h3>
<pre><code class="language-php">$news = $newsStore-&gt;findBy(["author", "=", "John"], ["title" =&gt; "asc"], 10, 20);
// First 20 documents skipped, limited to 10 and ascending sort by title where author is John.</code></pre>
<h4>Result</h4>
<pre><code>[ ["_id" =&gt; 12, ... "title" =&gt; "Best Database"], ["_id" =&gt; 4, ... "title" =&gt; "Why SleekDB"], ...]</code></pre>
<h3>Example 2</h3>
<p>More complex where clause.</p>
<pre><code class="language-sql">WHERE ( author = "John" OR author = "Mark" ) AND ( topic like "School%" OR topic like "Work%" )</code></pre>
<pre><code class="language-php">$news = $newsStore-&gt;findBy(
      [
         [
            ["author", "=", "John"], "OR", ["author", "=", "Mark"],
         ],
         "AND", // &lt;-- Optional
         [
            ["topic", "like", "School%"], "OR", ["topic", "like", "Work%"]
         ]
      ],
      ["title" =&gt; "asc"],
      10,
      20
   );</code></pre>
<p><br/></p>
<h2 id="fetch-data-findOneBy">Get one document</h2>
<pre><code class="language-php">function findOneBy(array $criteria): array|null</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$criteria: array</h1>
<p>One or multiple where conditions.<br/>
Visit the <a class="gotoblock" href="#/criteria">$criteria</a> documentation page to learn more on how to define conditions.</p>
</li>
</ol>
<h3>Return value</h3>
<p>Returns <code>one document</code> or <code>null</code> if nothing is found.</p>
<h3>Example 1</h3>
<pre><code class="language-php">$news = $newsStore-&gt;findOneBy(["author", "=", "Mike"]);
// Returns one news article of the author called Mike</code></pre>
<h4>Result</h4>
<pre><code>["_id" =&gt; 18, "title" =&gt; "SleekDB is super fast", "author" =&gt; "Mike"]</code></pre>
<h3>Example 2</h3>
<p>More complex where clause.</p>
<pre><code class="language-sql">WHERE ( author = "John" OR author = "Mark" ) AND ( topic like "School%" OR topic like "Work%" )</code></pre>
<pre><code class="language-php">$news = $newsStore-&gt;findOneBy(
      [
         [
            ["author", "=", "John"], "OR", ["author", "=", "Mark"],
         ],
         "AND", // &lt;-- Optional
         [
            ["topic", "like", "School%"], "OR", ["topic", "like", "Work%"]
         ]
      ]
   );</code></pre>
<h2 id="fetch-data-count">Get the amount of all documents stored</h2>
<p>This method is especially fast because it just counts the amount of files.</p>
<pre><code class="language-php">function count(): int</code></pre>
<h3>Return value</h3>
<p>Returns the amount of documents in the store as an <code>int</code>.</p>
<h3>Example</h3>
<pre><code class="language-php">$newsCount = $newsStore-&gt;count();
// Returns: 27 </code></pre>
            <div class="editlink" 
              file="fetch-data.md" 
              version="2.14">
            </div>
          </div>
        
          <div class="intro" id="block_edit-data">
            <h1>Edit Data</h1>
<p>To edit a data object you can use the <code>update()</code> and <code>updateById()</code> method of the <code>Store</code> class.</p>
<blockquote>
<p>‚ÑπÔ∏è If you need to make more complex updates look into <a class="gotoblock" href="/#/query-builder">QueryBuilder</a> and <a class="gotoblock" href="/#/query">Query</a>.</p>
</blockquote>
<h2>Brief repetition of Store object creation</h2>
<p>For a more detailed documentation on <code>Store</code> object creation refer to the corresponding <a class="gotoblock" href="#/managing-store">&quot;Managing Store&quot; documentation</a>.</p>
<pre><code class="language-php">use SleekDB\Store;
$userStore = new Store('users', __DIR__ . "/database");</code></pre>
<h2>Summary</h2>
<ul>
<li><a class="gotoblock" href="#/edit-data#updateById">updateById</a></li>
<li><a class="gotoblock" href="#/edit-data#update">update</a></li>
<li><a class="gotoblock" href="#/edit-data#removeFieldsById">removeFieldsById</a></li>
<li><a class="gotoblock" href="#/edit-data#updateOrInsert">updateOrInsert</a></li>
<li><a class="gotoblock" href="#/edit-data#updateOrInsertMany">updateOrInsertMany</a></li>
</ul>
<h2 id="edit-data-updateById">updateById()</h2>
<p>Update parts of a document.<br/>
This method is especially fast because it uses the _id to update the document directly instead of traversing through all documents.</p>
<pre><code class="language-php">function updateById(int|string $id, array $updatable): array|false</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$id: int|string</h1>
<p>Id of document to update.</p>
</li>
<li>
<h1>$updatable: array</h1>
<p>Array containing the parts to update.<br/>
Update of nested values possible by using a dot between fieldNames (Example 3)<br/>
If a field does not exist in that document, it will be added.</p>
</li>
</ol>
<h3>Return value</h3>
<p>Returns <code>updated document</code> on success or <code>false</code> if document could not be found.</p>
<h3>Example 1</h3>
<p>Change the status of the user with _id = 23.</p>
<pre><code class="language-php">$userStore-&gt;updateById(23, [ "status" =&gt; "active" ]);</code></pre>
<h3>Example 2</h3>
<p>Change the name and the age of the user with _id = 24.</p>
<pre><code class="language-php">$userStore-&gt;updateById(24, [ "name" =&gt; "Georg", "age" =&gt; 22 ]);</code></pre>
<h3>Example 3</h3>
<p>Change the street of the user with _id = 24.<br/>
<strong>Note</strong>: The street is stored in a nested array.</p>
<pre><code class="language-php">$userStore-&gt;updateById(24, [ "address.street" =&gt; "first street" ]);</code></pre>
<h4>Result</h4>
<pre><code class="language-php">[
    "_id" =&gt; 24,
    "address" =&gt; [
        "street" =&gt; "first street",
        "postalCode" =&gt; "47129"
    ],
    ...
]</code></pre>
<h2 id="edit-data-update">update()</h2>
<p>Update a whole document.<br/>
This method is especially fast because it uses the _id of the given document/s to update it directly instead of traversing through all documents.</p>
<pre><code class="language-php">function update(array $updatable): bool;</code></pre>
<p><strong>Note</strong>: This method of the <code>Store</code> class updates/overrides entire document/s, not just parts.</p>
<h3>Parameters</h3>
<ol>
<li>
<h1>$updatable: array</h1>
<p>One or multiple documents</p>
<ul>
<li>[&quot;_id&quot; =&gt; 12, &quot;title&quot; =&gt; &quot;SleekDB rocks!&quot;, ...]</li>
<li>[ [&quot;_id&quot; =&gt; 12, &quot;title&quot; =&gt; &quot;SleekDB rocks!&quot;, ...], [&quot;_id&quot; =&gt; 13, &quot;title&quot; =&gt; &quot;Multiple Updates&quot;, ...], ... ]</li>
</ul>
</li>
</ol>
<h3>Return value</h3>
<p>Returns <code>true</code> on success or <code>false</code> if document with given _id does not exist.</p>
<h3>Example 1: Update one user that we got beforehand</h3>
<pre><code class="language-php">$user = [
    'name' =&gt; 'Willard Bowman',
    'products' =&gt; [
        'totalSaved' =&gt; 0,
        'totalBought' =&gt; 0
    ],
];

//store the user
$userStore-&gt;insert($user); // has _id = 1

// retrieve a user
$user = $userStore-&gt;findById(1);

// update user
$user["name"] = "Luke Bowman";

$userStore-&gt;update( $user ); // updates the user by using his _id</code></pre>
<h3>Example 2: Update multiple users</h3>
<pre><code class="language-php">// retrieve users
$users = $userStore-&gt;findBy(["name", "=", "Josh"]);

foreach($users as $key =&gt; $user){
    // change the properties of the users
    $user["name"] = "Luke Bowman";

    // push changed user back to the users array
    $users[$key] = $user;
}

// update all users that had the name Josh
$userStore-&gt;update( $users );</code></pre>
<h2 id="edit-data-removeFieldsById">removeFieldsById()</h2>
<p>Update parts of a document.<br/>
This method is especially fast because it uses the _id to update the document directly instead of traversing through all documents.</p>
<pre><code class="language-php">function removeFieldsById(int|string $id, array $fieldsToRemove): array|false</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$id: int|string</h1>
<p>Id of document to remove fields of.</p>
</li>
<li>
<h1>$fieldsToRemove: array</h1>
<p>Array containing fields to remove.<br/>
Removal of nested fields possible by using a dot between fieldNames (Example 3)</p>
</li>
</ol>
<h3>Return value</h3>
<p>Returns <code>updated document</code> on success or <code>false</code> if document could not be found.</p>
<h3>Example 1</h3>
<p>Remove the status field of the user with _id = 23.</p>
<pre><code class="language-php">$userStore-&gt;updateById(23, [ "status" ]);</code></pre>
<h3>Example 2</h3>
<p>Remove the name and the age fields of the user with _id = 24.</p>
<pre><code class="language-php">$userStore-&gt;updateById(24, [ "name", "age" ]);</code></pre>
<h3>Example 3</h3>
<p>Remove the street field of the user with _id = 24.<br/>
<strong>Note</strong>: The street is stored in a nested array.</p>
<pre><code class="language-php">$userStore-&gt;updateById(24, [ "address.street" ]);</code></pre>
<h4>Result</h4>
<pre><code class="language-php">[
    "_id" =&gt; 24,
    "address" =&gt; [
        "postalCode" =&gt; "47129"
    ],
    ...
]</code></pre>
<h2 id="edit-data-updateOrInsert">updateOrInsert()</h2>
<p>Update or insert one document.<br/>
This method is especially fast because it uses the _id to update or insert the document directly instead of traversing through all documents.</p>
<pre><code class="language-php">public function updateOrInsert(array $data, bool $autoGenerateIdOnInsert = true): array</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$data: array</h1>
<p>Document to update or insert.</p>
</li>
<li>
<h1>$autoGenerateIdOnInsert: bool</h1>
<p>Default: <code>true</code><br/>
If <code>false</code> and <strong>the document has a _id</strong>, that does not already exist (insert), the _id will be to insert the new document, an auto-generated _id will be used otherwise.</p>
</li>
</ol>
<h3>Return value</h3>
<p>Returns <code>updated / inserted document</code>.</p>
<h3>Example 1</h3>
<p>Update or Insert a user with _id = 23, apply an auto-generated _id if it is an insert.</p>
<pre><code class="language-php">$user = [
    "_id" =&gt; 23,
    "name" =&gt; "John",
    ...
];
$userStore-&gt;updateOrInsert($user);</code></pre>
<h3>Example 2</h3>
<p>Update or Insert a user with _id = 23.</p>
<pre><code class="language-php">$user = [
    "_id" =&gt; 23,
    "name" =&gt; "John",
    ...
];
$userStore-&gt;updateOrInsert($user, false);</code></pre>
<h3>Example 3</h3>
<p>Update or Insert a user with no _id.</p>
<pre><code class="language-php">$user = [
    "name" =&gt; "John",
    ...
];
$userStore-&gt;updateOrInsert($user);</code></pre>
<h2 id="edit-data-updateOrInsertMany">updateOrInsertMany()</h2>
<p>Update or insert multiple documents.<br/>
This method is especially fast because it uses the _id to update or insert the documents directly instead of traversing through all documents.</p>
<pre><code class="language-php">public function updateOrInsertMany(array $data, bool $autoGenerateIdOnInsert = true): array</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$data: array</h1>
<p>Documents to update or insert.</p>
</li>
<li>
<h1>$autoGenerateIdOnInsert: bool</h1>
<p>Default: <code>true</code><br/>
If <code>false</code> and <strong>a document has a _id</strong>, that does not already exist (insert), the _id will be to insert the new document, an auto-generated _id will be used otherwise.</p>
</li>
</ol>
<h3>Return value</h3>
<p>Returns <code>updated / inserted documents</code>.</p>
<h3>Example 1</h3>
<p>Update or Insert multiple users and apply auto-generated _id's on inserts.</p>
<pre><code class="language-php">$users = [
    [
        "_id" =&gt; 23,
        "name" =&gt; "John",
        ...
    ],
    [
        "_id" =&gt; 25,
        "name" =&gt; "Max",
        ...
    ],
    [
        "name" =&gt; "Lisa",
        ...
    ]
    ...
];
$userStore-&gt;updateOrInsertMany($users);</code></pre>
<h3>Example 2</h3>
<p>Update or Insert a users with their _id's.</p>
<pre><code class="language-php">$users = [
    [
        "_id" =&gt; 23,
        "name" =&gt; "John",
        ...
    ],
    [
        "_id" =&gt; 25,
        "name" =&gt; "Max",
        ...
    ],
    [
        "name" =&gt; "Lisa", // &lt;-- will get auto-generated _id
        ...
    ]
    ...
];
$userStore-&gt;updateOrInsertMany($users, false);
// Lisa will get a auto-generated _id, because there is no _id in the document!</code></pre>
            <div class="editlink" 
              file="edit-data.md" 
              version="2.14">
            </div>
          </div>
        
          <div class="intro" id="block_delete-data">
            <h1>Delete Data</h1>
<p>To delete documents you can use the <code>deleteBy()</code> and <code>deleteById()</code> methods of the <code>Store</code> class.</p>
<blockquote>
<p>‚ÑπÔ∏è If you need to make a more complex delete look into <a class="gotoblock" href="/#/query-builder">QueryBuilder</a> and <a class="gotoblock" href="#/query">Query</a>.</p>
</blockquote>
<h2>Brief repetition of Store object creation</h2>
<p>For a more detailed documentation on <code>Store</code> object creation refer to the corresponding <a class="gotoblock" href="#/managing-store">&quot;Managing Store&quot; documentation</a>.</p>
<pre><code class="language-php">use SleekDB\Store;
$userStore = new Store('users', __DIR__ . "/database");</code></pre>
<h2>Summary</h2>
<ul>
<li><a class="gotoblock" href="#/delete-data#deleteBy">deleteBy</a></li>
<li><a class="gotoblock" href="#/delete-data#deleteById">deleteById</a></li>
</ul>
<h2 id="delete-data-deleteBy">Delete one or multiple documents</h2>
<pre><code class="language-php">function deleteBy(array $criteria, int $returnOption = Query::DELETE_RETURN_BOOL): array|bool|int</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$criteria: array</h1>
<p>One or multiple where conditions.<br/>
Visit the <a class="gotoblock" href="#/criteria">$criteria</a> documentation page to learn more on how to define conditions.</p>
</li>
<li>
<h1>$returnOption: int</h1>
<p>Different return options provided with constants of the <code>Query</code> class</p>
<ul>
<li><code>Query::DELETE_RETURN_BOOL</code> (Default)<br/>Return true or false</li>
<li><code>Query::DELETE_RETURN_RESULTS</code><br/>Retrieve deleted files as an array</li>
<li><code>Query::DELETE_RETURN_COUNT</code><br/>Returns the amount of deleted documents</li>
</ul>
</li>
</ol>
<h3>Return value</h3>
<p>This method returns based on the given return option either <code>boolean</code>, <code>int</code> or <code>array</code>.</p>
<h3>Example 1</h3>
<p>Lets delete all user whose name is &quot;Joshua Edwards&quot;</p>
<pre><code class="language-php">$userStore-&gt;deleteBy(["name", "=", "Joshua Edwards"]);
// Returns true</code></pre>
<p>Lets delete all user whose name is &quot;Joshua Edwards&quot; and retrieve deleted documents.</p>
<pre><code class="language-php">use SleekDB/Query;
$deletedUsers = $userStore-&gt;deleteBy(["name", "=", "Joshua Edwards"], Query::DELETE_RETURN_RESULTS);</code></pre>
<h4>Example result</h4>
<pre><code>[ ["_id" =&gt; 12, "name" =&gt; "Joshua Edwards"], ["_id" =&gt; 14, "name" =&gt; "Joshua Edwards"], ... ]</code></pre>
<h3>Example 2</h3>
<p>Deletion with more complex where statement.</p>
<pre><code class="language-sql">WHERE ( name = "Joshua Edwards" OR name = "Mark Schiffer" ) AND ( age &gt; 30 OR age &lt; 10 )</code></pre>
<pre><code class="language-php">$userStore-&gt;deleteBy(
    [
      [
        ["name", "=", "Joshua Edwards"],
        "OR",
        ["name", "=", "Mark Shiffer"],
      ],
      "AND", // &lt;-- Optional
      [
        ["age", "&gt;", 30],
        "OR",
        ["age", "&lt;", 10]
      ]
    ]
  );</code></pre>
<p><br/></p>
<h2 id="delete-data-deleteById">Delete one document with its _id</h2>
<p>This method is especially fast because SleekDB uses the _id to directly delete the document and does not traverse through all files.</p>
<pre><code class="language-php">function deleteById(int|string $id): bool</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$id: int|string</h1>
<p>The _id of a document located in the store.</p>
</li>
</ol>
<h3>Return value</h3>
<p>Returns <code>true</code> if document does not exist or deletion was successful or <code>false</code> on failure.</p>
<h3>Example</h3>
<pre><code class="language-php">$userStore-&gt;deleteById(12);
// Returns true</code></pre>
            <div class="editlink" 
              file="delete-data.md" 
              version="2.14">
            </div>
          </div>
        
          <div class="intro" id="block_criteria">
            <h1>$criteria</h1>
<p>The $criteria is an argument accepted by many different methods.<br/>
It is used to define one or multiple conditions to filter documents.</p>
<p>Methods that accept criteria as an argument:</p>
<ul>
<li><a class="gotoblock" href="#/fetch-data#findBy">Store-&gt;findBy()</a></li>
<li><a class="gotoblock" href="#/fetch-data#findOneBy">Store-&gt;findOneBy()</a></li>
<li><a class="gotoblock" href="#/delete-data#deleteBy">Store-&gt;deleteBy()</a></li>
<li><a class="gotoblock" href="#/query-builder#where">QueryBuilder-&gt;where()</a></li>
<li><a class="gotoblock" href="#/query-builder#orWhere">QueryBuilder-&gt;orWhere()</a></li>
<li><a class="gotoblock" href="#/query-builder#having">QueryBuilder-&gt;having()</a></li>
</ul>
<h2>Summary</h2>
<ul>
<li><a class="gotoblock" href="#/criteria#criteria">$criteria: array</a></li>
<li><a class="gotoblock" href="#/criteria#examples">Examples</a></li>
</ul>
<h2 id="criteria-criteria">$criteria: array</h2>
<p>One or multiple conditions.<br/>
The criteria can be nested as much as needed.</p>
<ul>
<li>[$fieldName, $condition, $value]</li>
<li>[ [$fieldName, $condition, $value], [$fieldName, $condition, $value], ... ]</li>
<li>[ [$fieldName, $condition, $value], OPERATION ,[$fieldName, $condition, $value], ... ]</li>
</ul>
<p>With SleekDB version 2.10 we introduce closures to filter data with your own custom functions.</p>
<ul>
<li>[ CLOSURE ]</li>
<li>[ CLOSURE, CLOSURE, ... ]</li>
<li>[ CLOSURE, [$fieldName, $condition, $value], ... ]</li>
<li>
<p>[ CLOSURE, OPERATION, [$fieldName, $condition, $value], ... ]</p>
<ul>
<li>
<h1>$fieldName: string</h1>
<p>The field name argument is the property that we want to check in our data object.</p>
<p>As our data object is basically a JSON document so it could have nested properties.</p>
<p>To target nested properties we use a single dot between the property/field name.</p>
<p><strong>Example:</strong> From our above users object if we want to target the &quot;country&quot; property of a user, then we would pass <code>location.country</code> in this argument, because &quot;location&quot; is the parent property of the &quot;country&quot; property in our data object.</p>
</li>
<li>
<h1>$condition: string</h1>
<p>To apply the comparison filters we use this argument.<br/>
The condition is <strong>case insensitive</strong>.</p>
<p>Allowed conditional operators are:</p>
<ul>
<li><code>=</code> Match equal against data.</li>
<li><code>===</code> Match equal against data.</li>
<li><code>==</code> Match equal against data. (Type unsafe comparison)</li>
<li><code>!=</code> Match not equal against data.</li>
<li><code>!==</code> Match not equal against data.</li>
<li><code>&lt;&gt;</code> Match not equal against data. (Type unsafe comparison)</li>
<li><code>&gt;</code> Match greater than against data.</li>
<li><code>&gt;=</code> Match greater equal against data.</li>
<li><code>&lt;</code> Match less than against data.</li>
<li><code>&lt;=</code> Match less equal against data.</li>
<li><code>LIKE</code> Match using wildcards.</li>
<li><code>NOT LIKE</code> Match using wildcards. <strong>Negation</strong> of result.<br/>
You can escape the following wildcards by appending a <code>\</code>.<br/>
For example <code>\%</code>.<br/>
Supported wildcards:
<ul>
<li><code>%</code> Represents zero or more characters<br/>
Example: bl% finds bl, black, blue, and blob</li>
<li><code>_</code> Represents a single character<br/>
Example: h_t finds hot, hat, and hit</li>
<li><code>[]</code> Represents any single character within the brackets<br/>
Example: h[oa]t finds hot and hat, but not hit</li>
<li><code>^</code> Represents any character not in the brackets<br/>
Example: h[^oa]t finds hit, but not hot and hat</li>
<li><code>-</code> Represents a range of characters<br/>
Example: c[a-b]t finds cat and cbt</li>
</ul></li>
<li><code>IN</code> $value has to be an <code>array</code>. Check if data is in given list. </li>
<li><code>NOT IN</code> $value has to be an <code>array</code>. Check if data is <strong>not</strong> in given list. </li>
<li><code>CONTAINS</code> Returns <code>true</code> if stored data is an array and the array contains $value.</li>
<li><code>NOT CONTAINS</code> Returns <code>true</code> if stored data is not an array or the array <strong>not</strong> contains $value.</li>
<li><code>BETWEEN</code> $value has to be an <code>array</code> with a lengeth of 2.<br/>
Check if data is within first and second value.<br/>
Begin and end values are included.</li>
<li><code>NOT BETWEEN</code> $value has to be an <code>array</code> with a length of 2.<br/>
Check if data is <strong>not</strong> within first and second value.<br/>
Begin and end values are included.</li>
<li><code>EXISTS</code> $value has to be a <code>boolean</code>. Check if field exists.<br/>
When $value is <code>true</code>, it returns the documents that <strong>contain</strong> the field $fieldName,<br/>
If $value is <code>false</code>, it returns only the documents that <strong>do not contain</strong> the field $fieldName.</li>
</ul>
</li>
<li>
<h1>$value</h1>
<p>Data that will be checked against the property value of the JSON documents.<br/>
Can also be a DateTime object if the property value of the JSON document is convertable into a DateTime object. Refer to the <a class="gotoblock" href="#/dates">Working with Dates</a> documentation to learn more about that.</p>
</li>
<li>
<h1>OPERATION: string</h1>
<p>It is used to connect multiple conditions.<br/>
The operation is optional and can be set to <code>AND</code> or <code>OR</code>.<br/>
Default: <code>AND</code></p>
</li>
<li>
<h1>CLOSURE: Closure</h1>
<p>Refer to the <a href="https://www.php.net/manual/en/functions.anonymous.php" target="_blank" rel="noopener nofollow" class="btn btn-primary btn-block">Official PHP documentation</a> to learn more about closures and anonymous functions.<br/>
The closure receives a document as parameter and has to return a <code>boolean</code>.<br/>
In <strong>Example 4</strong> (below) we use a closure.</p>
</li>
</ul>
</li>
</ul>
<h2 id="criteria-examples">Examples</h2>
<h3>Example 1</h3>
<p>Find all news articles of the author &quot;John&quot;.</p>
<pre><code class="language-php">$news = $newsStore-&gt;findBy(["author", "=", "John"]);</code></pre>
<h3>Example 2</h3>
<p>Find all news articles of the author &quot;John&quot;, that have &quot;cat&quot; in their title.</p>
<pre><code class="language-php">$news = $newsStore-&gt;findBy([
  ["author", "=", "John"], 
  "AND", // &lt;-- Optional
  ["title", "LIKE", "%cat%"]
]);</code></pre>
<pre><code class="language-php">$news = $newsStore-&gt;findBy([
  ["author", "=", "John"], 
  ["title", "LIKE", "%cat%"]
]);</code></pre>
<h3>Example 3</h3>
<p>Find all news articles of the author &quot;John&quot; or &quot;Smith&quot;, that have &quot;cat&quot; in their title.</p>
<pre><code class="language-php">$news = $newsStore-&gt;findBy([
  [
    ["author", "=", "John"], 
    "OR",
    ["author", "=", "Smith"], 
  ],
  "AND", // &lt;-- Optional
  ["title", "LIKE", "%cat%"]
]);</code></pre>
<pre><code class="language-php">$news = $newsStore-&gt;findBy([
  [
    ["author", "=", "John"], 
    "OR",
    ["author", "=", "Smith"], 
  ],
  ["title", "LIKE", "%cat%"]
]);</code></pre>
<h3>Example 4</h3>
<p>With this example we show you the usage of closures to filter data.<br/>
Every codeblock below does the same thing.<br/>
Find all news articles of the author &quot;John&quot; or &quot;Smith&quot;, that have &quot;cat&quot; in their title.</p>
<pre><code class="language-php">// A closure in conjunction with a normal condition
$news = $newsStore-&gt;findBy([
  function($article){
    return ($article['author'] === 'John' || $article['author'] === 'Smith');
  },
  "AND", // &lt;-- Optional
  ["title", "LIKE", "%cat%"]
]);</code></pre>
<pre><code class="language-php">// A closure in conjunction with a normal condition
$news = $newsStore-&gt;findBy([
  function($article){
    return ($article['author'] === 'John' || $article['author'] === 'Smith');
  },
  ["title", "LIKE", "%cat%"]
]);</code></pre>
<pre><code class="language-php">// Extracted the closure from the criteria array
$johnOrSmithCondition = function($article){
  return ($article['author'] === 'John' || $article['author'] === 'Smith')
};

// A closure in conjunction with a normal condition
$news = $newsStore-&gt;findBy([
  $johnOrSmithCondition,
  ["title", "LIKE", "%cat%"]
]);</code></pre>
<pre><code class="language-php">// Use external variables
$wantedAuthors = ['John', 'Smith'];

$johnOrSmithCondition = function($article) use ($wantedAuthors){
  return in_array($article['author'], $wantedAuthors, true);
};

// A closure in conjunction with a normal condition
$news = $newsStore-&gt;findBy([
  $johnOrSmithCondition,
  ["title", "LIKE", "%cat%"]
]);</code></pre>
            <div class="editlink" 
              file="criteria.md" 
              version="2.14">
            </div>
          </div>
        
          <div class="intro" id="block_query-builder">
            <h1>QueryBuilder</h1>
<p>The QueryBuilder is used to <strong>prepare more complex queries</strong>, <strong><code>not to execute the query!</code></strong>. You can create a QueryBuilder with the <code>createQueryBuilder()</code> method of the <code>Store</code> class.</p>
<pre><code class="language-php">$userQueryBuilder = $userStore-&gt;createQueryBuilder();</code></pre>
<h2>Summary</h2>
<ul>
<li><a class="gotoblock" href="#/query-builder#getQuery">getQuery</a></li>
<li><a class="gotoblock" href="#/query-builder#where">where</a></li>
<li><a class="gotoblock" href="#/query-builder#orWhere">orWhere</a></li>
<li><a class="gotoblock" href="#/query-builder#select">select</a></li>
<li><a class="gotoblock" href="#/query-builder#except">except</a></li>
<li><a class="gotoblock" href="#/query-builder#skip">skip</a></li>
<li><a class="gotoblock" href="#/query-builder#limit">limit</a></li>
<li><a class="gotoblock" href="#/query-builder#orderBy">orderBy</a></li>
<li><a class="gotoblock" href="#/query-builder#groupBy">groupBy</a></li>
<li><a class="gotoblock" href="#/query-builder#having">having</a></li>
<li><a class="gotoblock" href="#/query-builder#search">search</a></li>
<li><a class="gotoblock" href="#/query-builder#distinct">distinct</a></li>
<li><a class="gotoblock" href="#/query-builder#cache-management">Cache management</a></li>
<li><a class="gotoblock" href="#/query-builder#join">join</a></li>
<li><del><a class="gotoblock" href="#/query-builder#nestedWhere">nestedWhere</a></del> ( üö® Deprecated since version 2.3, use where and orWhere instead! )</li>
<li><del><a class="gotoblock" href="#/query-builder#in">in</a></del> ( üö® Deprecated since version 2.4, use where and orWhere instead! )</li>
<li><del><a class="gotoblock" href="#/query-builder#notIn">notIn</a></del>  ( üö® Deprecated since version 2.4, use where and orWhere instead! )</li>
</ul>
<h2 id="query-builder-getQuery">getQuery()</h2>
<p>With the <code>getQuery</code> method of the QueryBuilder class you can <strong><code>retrieve the Query object to execute the query</code></strong>.</p>
<pre><code class="language-php">function getQuery(): Query</code></pre>
<p>The most important methods of the Query class to execute a query are:</p>
<ul>
<li>
<h1>fetch()</h1>
<p>Retrieve multiple documents</p>
</li>
<li>
<h1>first()</h1>
<p>Retrieve first found document</p>
</li>
<li>
<h1>exists()</h1>
<p>Check if a document for given query exist</p>
</li>
<li>
<h1>delete()</h1>
<p>Delete all documents that are found with given query</p>
</li>
<li>
<h1>update()</h1>
<p>Update all documents that are found with given query</p>
</li>
</ul>
<p>For more details on query execution please visit the <a class="gotoblock" href="/#/query">Query</a> page.</p>
<h2 id="query-builder-where">where()</h2>
<p>To filter data we use the where() method of the QueryBuilder object.<br/>If you provide multiple conditions they are connected with an <code>AND</code>.</p>
<pre><code class="language-php">function where(array $criteria): QueryBuilder</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$criteria</h1>
<p>One or multiple where conditions.<br/>
Visit the <a class="gotoblock" href="#/criteria">$criteria</a> documentation page to learn more on how to define conditions.</p>
</li>
</ol>
<h3>Example 1</h3>
<p>To only get the user whose country is equal to &quot;England&quot; we would query like this:</p>
<pre><code class="language-php">// inline
$users = $userStore
  -&gt;createQueryBuilder()
  -&gt;where( [ "name", "=", "Joshua Edwards" ] )
  -&gt;getQuery()
  -&gt;fetch();

// creating the QueryBuilder
$userQueryBuilder = $userStore-&gt;createQueryBuilder();

// preparing the query with the QueryBuilder
$userQueryBuilder-&gt;where( [ "name", "=", "Joshua Edwards" ] );

// executing the query
$users = $userQueryBuilder-&gt;getQuery()-&gt;fetch();</code></pre>
<h3>Example 2</h3>
<p>You can also use multiple <code>where</code> conditions.</p>
<p>Retrieve all users that have <code>products.totalSaved &gt; 10 AND products.totalBought &gt; 20</code>.</p>
<pre><code class="language-php">// inline &amp; using where method multiple times
$users = $userQueryBuilder
  -&gt;where( ["products.totalSaved", "&gt;", 10] )
  -&gt;where( ["products.totalBought", "&gt;", 20] )
  -&gt;getQuery()
  -&gt;fetch();

// inline &amp; using where method once
$users = $userQueryBuilder
  -&gt;where(
    [
      ["products.totalSaved", "&gt;", 10],
      ["products.totalBought", "&gt;", 20]
    ]
  )
  -&gt;getQuery()
  -&gt;fetch();

// retrieve QueryBuilder
$userQueryBuilder = $userStore-&gt;createQueryBuilder()

// prepare query
$userQueryBuilder-&gt;where(
  [
    ["products.totalSaved", "&gt;", 10],
    ["products.totalBought", "&gt;", 20]
  ]
);

// execute query
$users = $userQueryBuilder-&gt;getQuery()-&gt;fetch();
</code></pre>
<h3>Example 3</h3>
<p>Retrieve all users that have the status &quot;premium&quot;, live in &quot;london&quot; or &quot;new york&quot; and are between the age of 16 and 20 or older than 30.</p>
<pre><code class="language-sql">// example in sql
WHERE 
  status = "premium" 
  AND 
  (
    ( city = "london" OR city = "new york" )
    AND 
    ( (age &gt;= 16 AND age &lt; 20) OR age &gt; 30 )
  )</code></pre>
<pre><code class="language-php">$users = $userQueryBuilder
  -&gt;where(
    [
      ["status", "=", "premium"], // &lt;-- If no operation is provided, "AND" is used.
      [ 
        [ "city", "=", "london" ], "OR", ["city", "=", "new york"] 
      ],
      "AND",
      [
        [
          [ "age", "&gt;=", 16 ], "AND", [ "age", "&lt;", 20 ]
        ],
        "OR",
        [ "age", "&gt;", 30 ]
      ]
    ]
  )
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<h2 id="query-builder-orWhere">orWhere()</h2>
<p><code>orWhere(...)</code> works as the OR condition of SQL. SleekDB supports multiple orWhere as object chain.<br/>If you provide multiple conditions they are connected with an <code>AND</code>.</p>
<pre><code class="language-php">function orWhere(array $criteria): QueryBuilder</code></pre>
<h3>Properties</h3>
<ol>
<li>
<h1>$criteria</h1>
<p>One or multiple where conditions.<br/>
Visit the <a class="gotoblock" href="#/criteria">$criteria</a> documentation page to learn more on how to define conditions.</p>
</li>
</ol>
<h3>Example 1</h3>
<p>Retrieve all users that have <code>(products.totalSaved &gt; 10 AND products.totalBought &gt; 20) OR products.shipped = 1</code></p>
<pre><code class="language-php">$users = $userQueryBuilder
  -&gt;where(
    [
      ["products.totalSaved", "&gt;", 10],
      ["products.totalBought", "&gt;", 20]
    ]
  )
  -&gt;orWhere( ["products.shipped", "=", 1] )
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<h3>Example 2</h3>
<p>Retrieve all users that have <code>products.totalSaved &gt; 10 OR (products.totalBought &gt; 20 AND products.shipped = 1) OR totalBought = 0</code></p>
<pre><code class="language-php">$users = $userQueryBuilder
  -&gt;where( ["products.totalSaved", "&gt;", 10] )
  -&gt;orWhere(
    [
      [ "products.totalBought", "&gt;", 20 ],
      [ "products.shipped", "=", 1 ]
    ]
  )
  -&gt;orWhere( ["products.totalBought", "=", 0] )
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<h3>Example 3</h3>
<p>Retrieve all users that have the status &quot;premium&quot; or live in &quot;london&quot; or &quot;new york&quot; and are between the age of 16 and 20 or older than 30.</p>
<pre><code class="language-sql">// example in sql
WHERE 
  status = "premium" 
  OR 
  (
    ( city = "london" OR city = "new york" )
    AND 
    ( (age &gt;= 16 AND age &lt; 20) OR age &gt; 30 )
  )</code></pre>
<pre><code class="language-php">$users = $userQueryBuilder
  -&gt;where(["status", "=", "premium"])
  -&gt;orWhere(
    [
      [ 
        [ "city", "=", "london" ], "OR", ["city", "=", "new york"] 
      ],
      "AND",
      [
        [
          [ "age", "&gt;=", 16 ], // &lt;-- If no operation is provided, "AND" is used.
          [ "age", "&lt;", 20 ]
        ],
        "OR",
        [ "age", "&gt;", 30 ]
      ]
    ]
  )
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<h2 id="query-builder-select">select()</h2>
<p>With select(...) you can specify specific fields to output, like after the SELECT keyword in SQL. SleekDB supports multiple <code>select()</code> as object chain for multiple fields.</p>
<pre><code class="language-php">function select(array $fieldNames): QueryBuilder</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$fieldNames: array</h1>
<p>Specify specific fields to output.</p>
<ul>
<li>[&quot;fieldName1&quot;, &quot;fieldName2&quot;, ...]</li>
<li>[&quot;ALIAS&quot; =&gt; &quot;fieldName1&quot;, &quot;fieldName2&quot;, ...]</li>
<li>[&quot;ALIAS&quot; =&gt; [&quot;FUNCTION&quot; =&gt; PARAMETER], ...]</li>
<li>[&quot;ALIAS&quot; =&gt; CLOSURE, ...]</li>
</ul>
</li>
</ol>
<h3>Select-Functions</h3>
<p>When using select functions you always need to define an alias!</p>
<h4>String functions</h4>
<p>String functions just apply to strings and return <code>null</code> on all other types.</p>
<ol>
<li>
<h1>UPPER</h1>
<p>Make a field uppercase.<br/>
Usage:</p>
<pre><code class="language-php">["ALIAS" =&gt; ["UPPER" =&gt; "fieldName"], ...]</code></pre>
</li>
<li>
<h1>LOWER</h1>
<p>Make a field lowercase.<br/>
Usage:</p>
<pre><code class="language-php">["ALIAS" =&gt; ["LOWER" =&gt; "fieldName"], ...]</code></pre>
</li>
<li>
<h1>LENGTH</h1>
<p>Get the length of a field.<br/>
<strong>Can also be used to get the <code>length of an array</code>!</strong><br/>
Usage:</p>
<pre><code class="language-php">["ALIAS" =&gt; ["LENGTH" =&gt; "fieldName"], ...]</code></pre>
</li>
<li>
<h1>CONCAT</h1>
<p>Concatenate multiple fields with a glue between each.<br/>
Usage:</p>
<pre><code class="language-php">["ALIAS" =&gt; ["CONCAT" =&gt; [GLUE, "fieldName1", "fieldName2", ...]], ...]</code></pre>
<ul>
<li>GLUE: string<br/>
The glue between the concatenated fields.</li>
</ul>
</li>
<li>
<h1>POSITION</h1>
<p>Get the position of a sub string.<br/>
Usage:</p>
<pre><code class="language-php">["ALIAS" =&gt; ["POSITION" =&gt; [SUBSTRING, "fieldName"]], ...]</code></pre>
<ul>
<li>SUBSTRING: string<br/>
The sub string to get the position of.</li>
</ul>
</li>
</ol>
<h4>Numeric functions</h4>
<p>Numeric functions just apply to numeric fields and return <code>null</code> on all other types.</p>
<ol>
<li>
<h1>SUM</h1>
<p>Retrieve the sum of a field.<br/>
Reduces amount of documents in result set to one. (If Group-By is not used)<br/>
Usage:</p>
<pre><code class="language-php">["ALIAS" =&gt; ["SUM" =&gt; "fieldName"], ...]</code></pre>
</li>
<li>
<h1>MAX</h1>
<p>Retrieve the max value of a field.<br/>
Reduces amount of documents in result set to one. (If Group-By is not used)<br/>
Usage:</p>
<pre><code class="language-php">["ALIAS" =&gt; ["MAX" =&gt; "fieldName"], ...]</code></pre>
</li>
<li>
<h1>MIN</h1>
<p>Retrieve the min value of a field.<br/>
Reduces amount of documents in result set to one. (If Group-By is not used)<br/>
Usage:</p>
<pre><code class="language-php">["ALIAS" =&gt; ["MIN" =&gt; "fieldName"], ...]</code></pre>
</li>
<li>
<h1>AVG</h1>
<p>Retrieve the average value of a field. (sum / amount)<br/>
Reduces amount of documents in result set to one. (If Group-By is not used)<br/>
Usage:</p>
<pre><code class="language-php">["ALIAS" =&gt; ["AVG" =&gt; "fieldName"], ...]</code></pre>
</li>
<li>
<h1>ROUND</h1>
<p>Round the value of a field.<br/>
Usage:</p>
<pre><code class="language-php">["ALIAS" =&gt; ["ROUND" =&gt; ["fieldName", PRECISION]], ...]</code></pre>
<ul>
<li>PRECISION: int<br/>
The optional number of decimal digits to round to.<br/>
If the precision is positive, val is rounded to precision significant digits after the decimal point.<br/>
If the precision is negative, val is rounded to precision significant digits before the decimal point, e.g. for a precision of -1 val is rounded to tens, for a precision of -2 to hundreds, etc.</li>
</ul>
</li>
<li>
<h1>ABS</h1>
<p>Get the absolute value of a field.<br/>
Usage:</p>
<pre><code class="language-php">["ALIAS" =&gt; ["ABS" =&gt; "fieldName"], ...]</code></pre>
</li>
</ol>
<h3>Custom select function</h3>
<p>With SleekDB version 2.10 we introduce closures to select fields with custom functions.<br/>
Refer to the <a href="https://www.php.net/manual/en/functions.anonymous.php" target="_blank" rel="noopener nofollow" class="btn btn-primary btn-block">Official PHP documentation</a> to learn more about closures and anonymous functions.<br/>
<br/>
Currently it is <u>not possible</u> to create a custom select function that considers the whole result set and reduces the amount of the result set to one, like <code>AVG</code>, <code>MIN</code>, <code>MAX</code> and <code>SUM</code> does.<br/>
<br/>
When using a custom select function you always have to provide an alias.<br/>
The closure <strong>receives a document as parameter</strong>.<br/>
<br/>
In <strong>Example 5</strong> you can see how to use custom functions to select fields.<br/>
<br/>
Usage:</p>
<pre><code class="language-php">["ALIAS" =&gt; CLOSURE, ...]</code></pre>
<h3>Example 1</h3>
<p>Retrieve just the name of all users.</p>
<pre><code class="language-php">$users = $userQueryBuilder
  -&gt;select(['name'])
  -&gt;getQuery()
  -&gt;fetch();
// output: [["_id" =&gt; 1, "name" =&gt; "Max"], ["_id" =&gt; 2, "name" =&gt; "Hasan"]]</code></pre>
<h3>Example 2</h3>
<p>Retrieve just the age of all users as age.<br/>
<strong>Note</strong>: The age of the user is stored in a nested array and we use an alias.</p>
<pre><code class="language-php">$users = $userQueryBuilder
  -&gt;select(["age" =&gt; "userBiography.age"])
  -&gt;getQuery()
  -&gt;fetch();
// output: [["_id" =&gt; 1, "age" =&gt; 20], ["_id" =&gt; 2, "age" =&gt; 17]]</code></pre>
<h3>Example 3</h3>
<p>Using select functions that reduce the amount of the result set to one.</p>
<pre><code class="language-sql">SELECT SUM(follower) as followerSum;</code></pre>
<pre><code class="language-php">$users = $userQueryBuilder
  -&gt;select([
    "followerSum" =&gt; ["SUM" =&gt; "follower"],
    "followerAvg" =&gt; ["AVG" =&gt; "follower"]
  ])
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<h4>Result</h4>
<pre><code class="language-php">[
  ["followerSum" =&gt; 81482, "followerAvg" =&gt; 501.319205]
]</code></pre>
<h3>Example 4</h3>
<p>Using a select function in conjunction with <a class="gotoblock" href="#/query-builder#groupBy">groupBy</a>.</p>
<pre><code class="language-sql">SELECT age, SUM(follower) as followerSum GROUP BY age;</code></pre>
<pre><code class="language-php">$users = $userQueryBuilder
  -&gt;select(["age", "followerSum" =&gt; ["SUM" =&gt; "follower"]])
  -&gt;groupBy(["age"])
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<h4>Result</h4>
<pre><code class="language-php">[
  ["age" =&gt; 18, "followerSum" =&gt; 901],
  ["age" =&gt; 20, "followerSum" =&gt; 435],
  ...
]</code></pre>
<h3>Example 5</h3>
<p>Using a custom select function (closure).<br/>
Every codeblock below does the same thing.<br/>
For demonstration purposes this <strong>example is very simple</strong> and you can achieve the <strong>same result with the <code>CONCAT</code> function</strong>!<br/>
The result of the query is shown at the bottom of this section.</p>
<pre><code class="language-php">$users = $userQueryBuilder
  -&gt;select([
    "age", 
    "fullName" =&gt; function($user){
      return $user['forename'] . ', ' . $user['surname'];
    },
    "follower"
  ])
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<pre><code class="language-php">// Extract the custom function from the select array
$fullNameSelectFunction = function($user){
  return $user['forename'] . ', ' . $user['surname'];
}

$users = $userQueryBuilder
  -&gt;select([
    "age", 
    "fullName" =&gt; $fullNameSelectFunction,
    "follower"
  ])
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<pre><code class="language-php">// Use external variables
$nameSeparator = ', ';

$fullNameSelectFunction = function($user) use ($nameSeparator){
  return $user['forename'] . $nameSeparator . $user['surname'];
};

$users = $userQueryBuilder
  -&gt;select([
    "age", 
    "fullName" =&gt; $fullNameSelectFunction,
    "follower"
  ])
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<h4>Result</h4>
<pre><code class="language-php">[
  ["age" =&gt; 18, "fullName" =&gt; "Tom, Great", "follower" =&gt; 901],
  ["age" =&gt; 20, "fullName" =&gt; "John, West", "follower" =&gt; 435],
  ...
]</code></pre>
<h2 id="query-builder-except">except()</h2>
<p><code>except(...)</code> works as the opposite of <code>select()</code> method. Use it when you don't want a property in the result. For example, if you don't want the password field in your returned data set.</p>
<pre><code class="language-php">function except(array $fieldNames): QueryBuilder</code></pre>
<ol>
<li>
<h1>$fieldNames: array</h1>
<p>Specify specific fields to exclude from the output.</p>
</li>
</ol>
<h3>Example 1</h3>
<p>Retrieve all information of an user except its _id and name.</p>
<pre><code class="language-php">$users = $userQueryBuilder
  -&gt;except(["_id", "name"])
  -&gt;getQuery()
  -&gt;fetch();
// output: [["age" =&gt; 28], ["age" =&gt; 18]]</code></pre>
<h3>Example 2</h3>
<p>Retrieve all information of an user except its name and streetNumber.<br/>
<strong>Note</strong>: The steet number is stored in a nested array.</p>
<pre><code class="language-php">$users = $userQueryBuilder
  -&gt;except(["name", "address.streetNumber"])
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<h4>Result</h4>
<pre><code>[ ["_id" =&gt; 2, "address" =&gt; [ "street" =&gt; "Firststreet" ]], ... ]</code></pre>
<h2 id="query-builder-skip">skip()</h2>
<p>Skip works as the OFFSET clause of SQL. You can use this to skip a specific amount of documents.</p>
<pre><code class="language-php">function skip(int|string $skip = 0): QueryBuilder</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$skip: int|string</h1>
<p>The value of how many documents should be skipped.</p>
</li>
</ol>
<h3>Example</h3>
<p>Retrieve all users except the first 10 found.</p>
<pre><code class="language-php">$users = $userQueryBuilder
  -&gt;skip(10)
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<pre><code class="language-php">$users = $userQueryBuilder
  -&gt;skip('10')
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<h2 id="query-builder-limit">limit()</h2>
<p>Works as the LIMIT clause of SQL. You can use this to limit the results to a specific amount.</p>
<pre><code class="language-php">function limit(int|string $limit = 0): QueryBuilder</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$limit: int|string</h1>
<p>Limit the amount of documents in the result set. Has to be greater than 0.</p>
</li>
</ol>
<h3>Example</h3>
<p>Retrieve just the first ten users.</p>
<pre><code class="language-php">$users = $userQueryBuilder
  -&gt;limit(10)
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<pre><code class="language-php">$users = $userQueryBuilder
  -&gt;limit('10')
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<h2 id="query-builder-orderBy">orderBy()</h2>
<p>Works as the ORDER BY clause of SQL. With this method you can sort the result. You can use this method to sort the result by one or multiple fields.</p>
<pre><code class="language-php">function orderBy(array $criteria): QueryBuilder</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$criteria: array</h1>
</li>
</ol>
<ul>
<li>[ $fieldName =&gt; $order ]</li>
<li>[ $fieldName =&gt; $order, $fieldName =&gt; $order, ... ]
<ul>
<li>
<h1>$fieldName: string</h1>
<p>Name of the field that will be used to sort the result.</p>
</li>
<li>
<h1>$order: string</h1>
<p>Either <code>desc</code> for a descending sort or <code>asc</code> for a ascending sort.</p>
</li>
</ul></li>
</ul>
<h3>Example 1</h3>
<p>Retrieve all users sorted by their name.</p>
<pre><code class="language-php">$users = $userQueryBuilder
  -&gt;orderBy(["name" =&gt; "asc"])
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<h4>Result</h4>
<pre><code>[["_id" =&gt; 13, "name" =&gt; "Anton"], ["_id" =&gt; 2, "name" =&gt; "Berta"], ...]</code></pre>
<h3>Example 2</h3>
<p>Retrieve all users sorted by their name and age.</p>
<pre><code class="language-php">$users = $userQueryBuilder
  -&gt;orderBy(["name" =&gt; "asc", "age" =&gt; "asc"])
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<h4>Result</h4>
<pre><code>[
  ["_id" =&gt; 13, "name" =&gt; "Anton", "age" =&gt; 20],
  ["_id" =&gt; 4, "name" =&gt; "Aragon", "age" =&gt; 16], 
  ["_id" =&gt; 2, "name" =&gt; "Aragon", "age" =&gt; 17], 
  ...
]</code></pre>
<h2 id="query-builder-groupBy">groupBy()</h2>
<p>Group documents using one or multiple fields.</p>
<pre><code class="language-php">function groupBy(array $groupByFields, string $counterKeyName = null, bool $allowEmpty = false): QueryBuilder</code></pre>
<blockquote>
<p><strong>Note</strong>: If you use <a class="gotoblock" href="#/query-builder#select">select</a> in conjunction with groupBy you have to explicitly specify all fields you want in the result set.</p>
</blockquote>
<h3>Parameters</h3>
<ol>
<li>
<h1>$groupByFields: array</h1>
<p>One or multiple fields to group documents by.</p>
</li>
<li>
<h1>$counterKeyName: string</h1>
<p>If counterKeyName is not null a counter that represents how many documents are grouped together will be applied to the result documents automatically using the given string as the name for the counter.<br/>
<strong>Note</strong>: You can not specify an alias with the <a class="gotoblock" href="#/query-builder#select">select</a> method for this new field, because it is already an alias!</p>
</li>
<li>
<h1>$allowEmpty: bool</h1>
<p>If <code>true</code> documents having an empty value like null, in the fields that are relevant for grouping, will be grouped together.</p>
</li>
</ol>
<h3>Example 1</h3>
<p>Group active products based on category.</p>
<pre><code class="language-sql">SELECT category, COUNT(*) AS productAmount WHERE active = true GROUP BY category;</code></pre>
<pre><code class="language-php">$productQueryBuilder
  -&gt;where(["active", "=", true])
  -&gt;groupBy(["category"], "productAmount")
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<h4>Result</h4>
<pre><code>[ 
  ["category" =&gt; "pants", "productAmount" =&gt; 200], 
  ["category" =&gt; "shirts", "productAmount" =&gt; 29], 
  ... 
]</code></pre>
<h3>Example 2</h3>
<p>Group active products based on category and return the sum of the views.</p>
<pre><code class="language-sql">SELECT 
  category AS Category,
  subcategory, 
  COUNT(*) AS productAmount,
  SUM(views) AS views 
WHERE 
  active = true 
GROUP BY 
  category, subcategory
ORDER BY
  category ASC, subcategory DESC;</code></pre>
<pre><code class="language-php">$productQueryBuilder
  -&gt;select([ 
    "Category" =&gt; "category", 
    "subcategory", 
    "productAmount", 
    "views" =&gt; ["SUM" =&gt; "views"] 
  ])
  -&gt;where(["active", "=", true])
  -&gt;groupBy(
    ["category", "subcategory"],
    "productAmount"
  )
  -&gt;orderBy(["category" =&gt; "ASC", "subcategory" =&gt; "DESC"])
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<h4>Result</h4>
<pre><code>[ 
  ["Category" =&gt; "pants", "subcategory" =&gt; "shorts", "productAmount" =&gt; 20, "views" =&gt; 212], 
  ["Category" =&gt; "pants", "subcategory" =&gt; "jeans", "productAmount" =&gt; 83, "views" =&gt; 331], 
  ... 
]</code></pre>
<h2 id="query-builder-having">having()</h2>
<p>The <code>having()</code> method was added, because the <code>where()</code> and <code>orWhere()</code> methods do not consider select functions and grouped documents.<br/>
As you can see in the <a class="gotoblock" href="#/execution-order#query">Order of query execution</a> documentation you can use <code>having()</code> to further filter the result after <code>join()</code>, <code>search()</code>, <code>select()</code> and <code>groupBy()</code> is applied.</p>
<pre><code class="language-php">function having(array $criteria): QueryBuilder</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$criteria: array</h1>
<p>One or multiple where conditions.<br/>
Visit the <a class="gotoblock" href="#/criteria">$criteria</a> documentation page to learn more on how to define conditions.</p>
</li>
</ol>
<h3>Example 1</h3>
<p>Group active products based on category and just retrieve categories with views higher than 500 and lower than 1000.</p>
<pre><code class="language-sql">SELECT 
  category, 
  SUM(views) AS totalViews
WHERE 
  active = true 
GROUP BY 
  category 
HAVING
  totalViews &gt; 500 AND totalViews &lt; 1000;</code></pre>
<pre><code class="language-php">$productQueryBuilder
  -&gt;select([ "category", "totalViews" =&gt; ["SUM" =&gt; "views"] ])
  -&gt;where(["active", "=", true])
  -&gt;groupBy(["category"])
  -&gt;having([ 
    ["totalViews", "&gt;", 500], 
    "AND", // &lt;- Optional
    ["totalViews", "&lt;", 1000] 
  ])
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<h4>Result</h4>
<pre><code>[ 
  ["category" =&gt; "pants", "totalViews" =&gt; 502], 
  ["category" =&gt; "shirts", "totalViews" =&gt; 931], 
  ... 
]</code></pre>
<h3>Example 2</h3>
<p>Group active products based on category and just retrieve categories with views higher than 500 and lower than 1000.</p>
<pre><code class="language-sql">SELECT 
  name, 
  ROUND(price, 0) AS roundedPrice
WHERE 
  active = true 
HAVING
  roundedPrice &gt; 500 AND roundedPrice &lt; 1000;</code></pre>
<pre><code class="language-php">$productQueryBuilder
  -&gt;select([ "name", "roundedPrice" =&gt; ["ROUND" =&gt; ["price", 0]] ])
  -&gt;where(["active", "=", true])
  -&gt;having([ 
    ["roundedPrice", "&gt;", 500], 
    "AND", // &lt;- Optional
    ["roundedPrice", "&lt;", 1000] 
  ])
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<h4>Result</h4>
<pre><code>[ 
  ["name" =&gt; "Best Schoe", "roundedPrice" =&gt; 519], 
  ["name" =&gt; "Black Jeans", "roundedPrice" =&gt; 549], 
  ... 
]</code></pre>
<h2 id="query-builder-search">search()</h2>
<p>Do a fulltext like search against one or multiple fields.</p>
<pre><code class="language-php">function search(array|string $fields, string $query, array $options = []): QueryBuilder</code></pre>
<blockquote>
<p>Please visit the <a class="gotoblock" href="#/searching">&quot;Searching&quot; documentation</a> for more details and examples!</p>
</blockquote>
<h3>Parameters</h3>
<ol>
<li>
<h1>$fields: array|string</h1>
<p>An array containg all fields to search against.</p>
<ul>
<li>&quot;title&quot;</li>
<li>[&quot;title&quot;]</li>
<li>[&quot;title&quot;, &quot;content&quot;, ...]</li>
</ul>
<p>As our documents are basically JSON documents it also could have nested properties.</p>
<p>To target nested properties we use a single dot between the property/field name.</p>
<p><strong>Example:</strong> <code>address.street</code></p>
</li>
<li>
<h1>$query: string</h1>
<p>The search query.</p>
</li>
<li>
<h1>$options: array</h1>
<p>Configure the search behaviour on a query by query base.</p>
</li>
</ol>
<h2 id="query-builder-distinct">distinct()</h2>
<p>The distinct method is used to retrieve unique values from the store. It will remove all the duplicate documents while fetching data from a store.</p>
<pre><code class="language-php">function distinct(array|string $fields): QueryBuilder</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$fields: array|string</h1>
<p>Specify one or multiple fields you want to be distinct.</p>
</li>
</ol>
<h3>Example</h3>
<p>Retrieve all users, but just the first user if there is another one with the same name.</p>
<pre><code class="language-php">// providing a string
$distinctUsers = $userQueryBuilder
  -&gt;distinct("name")
  -&gt;getQuery()
  -&gt;fetch();

// providing an array
$distinctUsers = $userQueryBuilder
  -&gt;distinct(["name"])
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<h2 id="query-builder-cache-management">Cache management</h2>
<p>The QueryBuilder provides the <code>useCache</code>, <code>disableCache</code> and <code>regenerateCache</code> methods to manage caching on a query by query base.</p>
<p>Please visit the <a class="gotoblock" href="/#/cache-management">Cache Management</a> page for more details.</p>
<h2 id="query-builder-join">join()</h2>
<p>This method is used to join two or multiple stores together.</p>
<p>For more details please visit the <a class="gotoblock" href="/#/join-stores">Join Stores</a> page.</p>
<pre><code class="language-php">function join(Closure $joinedStore, string $propertyName): QueryBuilder</code></pre>
<h2 id="query-builder-nestedWhere"><del>nestedWhere()</del></h2>
<blockquote>
<h3>üö® Deprecated since version 2.3, use <code>where</code> and <code>orWhere</code> instead!</h3>
</blockquote>
<p>With the <code>nestedWhere(...)</code> method you are able to make complex nested where statements.</p>
<pre><code class="language-php">function nestedWhere(array $conditions): QueryBuilder</code></pre>
<h3>Conditions array structure</h3>
<pre><code class="language-php">[
  "OUTERMOST_OPERATION" =&gt; [
    // conditions
  ]
];</code></pre>
<h3>Properties</h3>
<ol>
<li>
<h1>$conditions</h1>
<p>Multiple where conditions.<br/>
The criteria can be nested as much as needed.</p>
</li>
</ol>
<ul>
<li>
<p>Small Example:<br/>
[ &quot;OUTERMOST_OPERATION&quot; =&gt; [ [$fieldName, $condition, $value], &quot;OPERATION&quot;, [$fieldName, $condition, $value] ] ]</p>
<ul>
<li>
<h1>$fieldName: string</h1>
<p>The field name argument is the property that we want to check in our data object.</p>
<p>As our data object is basically a JSON document so it could have nested properties.</p>
<p>To target nested properties we use a single dot between the property/field name.</p>
<p><strong>Example:</strong> From our above users object if we want to target the &quot;country&quot; property of a user, then we would pass <code>location.country</code> in this argument, because &quot;location&quot; is the parent property of the &quot;country&quot; property in our data object.</p>
</li>
<li>
<h1>$condition: string</h1>
<p>To apply the comparison filters we use this argument.
The condition is case insensitive.</p>
<p>Allowed conditional operators are:</p>
<ul>
<li><code>=</code> Match equal against data.</li>
<li><code>===</code> Match equal against data.</li>
<li><code>==</code> Match equal against data. (Type unsafe comparison)</li>
<li><code>!=</code> Match not equal against data.</li>
<li><code>!==</code> Match not equal against data.</li>
<li><code>&lt;&gt;</code> Match not equal against data. (Type unsafe comparison)</li>
<li><code>&gt;</code> Match greater than against data.</li>
<li><code>&gt;=</code> Match greater equal against data.</li>
<li><code>&lt;</code> Match less than against data.</li>
<li><code>&lt;=</code> Match less equal against data.</li>
<li><code>LIKE</code> Match using wildcards.</li>
<li><code>NOT LIKE</code> Match using wildcards. <strong>Negation</strong> of result.<br/>
Supported wildcards:
<ul>
<li><code>%</code> Represents zero or more characters<br/>
Example: bl% finds bl, black, blue, and blob</li>
<li><code>_</code> Represents a single character<br/>
Example: h_t finds hot, hat, and hit</li>
<li><code>[]</code> Represents any single character within the brackets<br/>
Example: h[oa]t finds hot and hat, but not hit</li>
<li><code>^</code> Represents any character not in the brackets<br/>
Example: h[^oa]t finds hit, but not hot and hat</li>
<li><code>-</code> Represents a range of characters<br/>
Example: c[a-b]t finds cat and cbt</li>
</ul></li>
<li><code>IN</code> $value has to be an <code>array</code>. Check if data is in given list. </li>
<li><code>NOT IN</code> $value has to be an <code>array</code>. Check if data is <strong>not</strong> in given list. </li>
<li><code>BETWEEN</code> $value has to be an <code>array</code> with a lengeth of 2.<br/>
Check if data is within first and second value.<br/>
Begin and end values are included.</li>
<li><code>NOT BETWEEN</code> $value has to be an <code>array</code> with a length of 2.<br/>
Check if data is <strong>not</strong> within first and second value.<br/>
Begin and end values are included.</li>
</ul>
</li>
<li>
<h1>$value</h1>
<p>Data that will be checked against the property value of the JSON documents.<br/>
Can also be a DateTime object if the property value of the JSON document is convertable into a DateTime object. Refer to the <a class="gotoblock" href="#/dates">Working with Dates</a> documentation to learn more about that.</p>
</li>
<li>
<h1>OUTERMOST_OPERATION: string</h1>
<p>Can be set to <code>AND</code> or <code>OR</code>.<br/>
It is <strong>optional</strong> and will <strong>default</strong> to an <code>AND</code> operation.<br/>
The outermost operation is optional and does specify how the given conditions are connected with other conditions, like the ones that are specified using the <code>where</code>, <code>orWhere</code>, in or <code>notIn</code> methods.</p>
</li>
<li>
<h1>OPERATION: string</h1>
<p>Can be set to <code>AND</code> or <code>OR</code>.<br/>
The operation is used to connect multiple conditions.</p>
</li>
</ul>
</li>
</ul>
<h3>Example 1</h3>
<p>Retrieve all users whos name start with &quot;a&quot; or &quot;b&quot;, that have products.totalSaved &gt; 10 and products totalBought &gt; 10 and are between 16 and 20 or 24 and 28 years old.</p>
<pre><code class="language-sql">WHERE 
  (products.totalSaved &gt; 10 AND products.totalBought &gt; 20) 
  AND // &lt;- Outermost Operation
  ( 
    (name like 'a%' OR name like 'b%') 
    AND 
    (
      (age &gt;= 16 AND age &lt; 20) 
      OR 
      (age &gt;= 24 AND age &lt; 28)) 
    )</code></pre>
<pre><code class="language-php">$users = $userQueryBuilder
  -&gt;where(
    [
      ["products.totalSaved", "&gt;", 10],
      ["products.totalBought", "&gt;", 20]
    ]
  )
  -&gt;nestedWhere(
    [
      "AND" =&gt; [ // &lt;- Outermost operation
        [
          [ "name", "like", "a%" ], "OR", [ "name", "like", "b%" ]
        ],
        "AND",
        [
          [
            [ "age", "&gt;=", 16 ], "AND", [ "age", "&lt;", 20 ]
          ],
          "OR",
          [
            [ "age", "&gt;=", 24 ], "AND", [ "age", "&lt;", 28 ]
          ]
        ]
      ]
    ]
  )
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<h3>Example 2</h3>
<p>Retrieve all users that have the status &quot;premium&quot;, live in &quot;london&quot; and are between the age of 16 and 20 or older than 30.</p>
<pre><code class="language-php">$users = $userQueryBuilder
  -&gt;where(
    [
      ["status", "=", "premium"]
    ]
  )
  -&gt;nestedWhere(
    [
      [ // &lt;- Outermost operation is optional (Default: "AND")
        [ "city", "=", "london" ]
        "AND",
        [
          [
            [ "age", "&gt;=", 16 ], "AND", [ "age", "&lt;", 20 ]
          ],
          "OR",
          [ "age", "&gt;", 30 ]
        ]
      ]
    ]
  )
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<h3 id="query-builder-in"><del>in()</del></h3>
<blockquote>
<h3>üö® Deprecated since version 2.3, use <code>where</code> and <code>orWhere</code> instead!</h3>
</blockquote>
<p>in(...) works as the IN clause of SQL. SleekDB supports multiple IN as object chain for different fields.</p>
<pre><code class="language-php">in(string $fieldName, array $values = []): QueryBuilder</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$fieldName: string</h1>
<p>The field name argument is the property that we want to check in our data object.</p>
<p>You can also provide have nested properties separated with a dot &quot;.&quot;.</p>
</li>
<li>
<h1>$values: array</h1>
<p>This argument takes an array to match documents within its items.</p>
</li>
</ol>
<h3>Examples</h3>
<p>Retrieve all users that are from the country BD, CA, SE or NA.</p>
<pre><code class="language-php">$users = $userQueryBuilder
  -&gt;in("country", ["BD", "CA", "SE", "NA"])
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<p>Retrieve all users that are from country BD, CA, SE, NA and are at the age of 18, 20, 23 or 30.</p>
<pre><code class="language-php">$users = $userQueryBuilder
  -&gt;in("country", ["BD", "CA", "SE", "NA"])
  -&gt;in("age", [18, 20, 23, 30])
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<h2 id="query-builder-notIn"><del>notIn()</del></h2>
<blockquote>
<h3>üö® Deprecated since version 2.3, use <code>where</code> and <code>orWhere</code> instead!</h3>
</blockquote>
<p>notIn(...) works as the opposite of in() method.</p>
<p>It will filter out all documents that has particular data items from the given array.
SleekDB supports multiple notIn as object chain for different fields.</p>
<p>The notIn() method takes two arguments as in() method, those are:</p>
<pre><code class="language-php">function notIn(string $fieldName, array $values = []): QueryBuilder</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$fieldName: string</h1>
<p>The field name argument is the property that we want to check in our data object.</p>
<p>You can also provide have nested properties separated with a dot &quot;.&quot;.</p>
</li>
<li>
<h1>$values: array</h1>
<p>This argument takes an array to match documents within its items.</p>
</li>
</ol>
<h3>Examples</h3>
<p>Retrieve all users that are not from the coutry IN, KE or OP.</p>
<pre><code class="language-php">$users = $userQueryBuilder
  -&gt;notIn("country", ["IN", "KE", "OP"])
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<p>Retrieve all users that are not from the country IN, KE or OP and do not have products.totalSaved 100, 150 or 200.</p>
<pre><code class="language-php">$users = $userQueryBuilder
  -&gt;notIn("country", ["IN", "KE", "OP"])
  -&gt;notIn("products.totalSaved", [100, 150, 200])
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
            <div class="editlink" 
              file="query-builder.md" 
              version="2.14">
            </div>
          </div>
        
          <div class="intro" id="block_cache-management">
            <h1>Cache Management</h1>
<p>The <code>QueryBuilder</code> class does provide a couple of methods to <code>manage caching on a query by query bases</code>.</p>
<p>By default caching is enabled store wide and does not need to be enabled on a query by query bases. For more information please look into the store <a class="gotoblock" href="/#/configurations">configurations</a>.</p>
<p>Create a QueryBuilder:</p>
<pre><code class="language-php">$userQueryBuilder = $userStore-&gt;createQueryBuilder();</code></pre>
<h2>Summary</h2>
<ul>
<li><a class="gotoblock" href="#/cache-management#useCache">useCache</a></li>
<li><a class="gotoblock" href="#/cache-management#disableCache">disableCache</a></li>
<li><a class="gotoblock" href="#/cache-management#regenerateCache">regenerateCache</a></li>
</ul>
<h2 id="cache-management-useCache">useCache()</h2>
<p>With the useCache method you can <code>activate caching</code> and define the <code>cache lifetime</code> on a query by query bases.</p>
<pre><code class="language-php">function useCache(int $lifetime = null): QueryBuilder</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$lifetime: int|null</h1>
<p>The lifetime of the cache.</p>
</li>
</ol>
<ul>
<li><code>null</code> (Default)<br/>
Cache will not have a lifetime and will be regenerated on every update, delete and insert.</li>
<li><code>int</code><br/>
Cache lifetime in seconds. <code>0</code> means infinite lifetime.</li>
</ul>
<h3>Example 1</h3>
<p>Retrieve and cache 20 users that are active.</p>
<p>The results in this example will use caching untill any documents gets updated/ deleted or inserted.</p>
<pre><code class="language-php">// fetch and insert in cache
$users = $userQueryBuilder
    -&gt;where( ['active', '=', 1] )
    -&gt;limit( 20 )
    -&gt;useCache() // Use caching with lifetime = null
    -&gt;getQuery()
    -&gt;fetch();

// retrieve from cache
$users = $userQueryBuilder
    -&gt;where( ['active', '=', 1] )
    -&gt;limit( 20 )
    -&gt;useCache()
    -&gt;getQuery()
    -&gt;fetch();

// insert a new user (cache with no lifetime will be deleted)
$newUser = ["name" =&gt; "Max", "active" =&gt; 0];
$userStore-&gt;insert($newUser);

// fetch and insert in cache
$users = $userQueryBuilder
    -&gt;where( ['active', '=', 1] )
    -&gt;limit( 20 )
    -&gt;useCache()
    -&gt;getQuery()
    -&gt;fetch();</code></pre>
<h3>Example 2</h3>
<p>Retrieve and cache result for 2 minutes, 20 users that are active.</p>
<pre><code class="language-php">// fetch and insert in cache
$users = $userQueryBuilder
    -&gt;where( ['active', '=', 1] )
    -&gt;limit( 20 )
    -&gt;useCache(120) // 2 minutes = 120 seconds
    -&gt;getQuery()
    -&gt;fetch();</code></pre>
<h3>Example 3</h3>
<p>Retrieve and cache result forever, 20 users that are active.</p>
<pre><code class="language-php">// fetch and insert in cache
$users = $userQueryBuilder
    -&gt;where( ['active', '=', 1] )
    -&gt;limit( 20 )
    -&gt;useCache(0) // 0 means infinite caching
    -&gt;getQuery()
    -&gt;fetch();</code></pre>
<h2 id="cache-management-disableCache">disableCache()</h2>
<p>Disable the build in caching solution on a query by query bases.<br/>
By default caching is enabled store wide. If you want to disable caching store instead of disabling it on a query by query bases visit the store <a class="gotoblock" href="/#/configurations">configurations</a> page.</p>
<pre><code class="language-php">function disableCache(): QueryBuilder</code></pre>
<h3>Example</h3>
<p>Retrieve 20 users that are active and do not use caching.</p>
<pre><code class="language-php">// fetch and insert in cache
$users = $userQueryBuilder
    -&gt;where( ['active', '=', 1] )
    -&gt;limit( 20 )
    -&gt;disableCache()
    -&gt;getQuery()
    -&gt;fetch();</code></pre>
<h2 id="cache-management-regenerateCache">regenerateCache()</h2>
<p>Regenerate the cache of a query regardless of its lifetime.</p>
<pre><code class="language-php">function regenerateCache(): QueryBuilder</code></pre>
<h3>Example</h3>
<pre><code class="language-php">// cache with infinite lifetime
$users = $userQueryBuilder
    -&gt;where( ['active', '=', 1] )
    -&gt;limit( 20 )
    -&gt;useCache(0)
    -&gt;getQuery()
    -&gt;fetch();

// returns documents not from cache and caches results for 20 seconds
$users = $userQueryBuilder
    -&gt;where( ['active', '=', 1] )
    -&gt;limit( 20 )
    -&gt;useCache(20)
    -&gt;regenerateCache()
    -&gt;getQuery()
    -&gt;fetch();</code></pre>
            <div class="editlink" 
              file="cache-management.md" 
              version="2.14">
            </div>
          </div>
        
          <div class="intro" id="block_join-stores">
            <h1>Join Stores</h1>
<p>With SleekDB it is easy to join multiple stores. You can add more than one <code>join</code> as well as nested <code>join</code> methods are also supported!</p>
<h3>Quick Example</h3>
<p>Query into the &quot;users&quot; store to fetch all users.
Each user also will get an additional property called &quot;comments&quot;, that contains all comments of the user.</p>
<pre><code class="language-php">$usersWithComments = $userStore
  -&gt;createQueryBuilder()
  -&gt;join(function($user) use ($commentStore) {
    return $commentStore-&gt;findBy(["user", "=", $user["_id"]]);
  }, "comments")
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<h4>Result</h4>
<pre><code>[
  [
    "_id" =&gt; 1, 
    "name" =&gt; "John", 
    "comments" =&gt; [
      [
        "_id" =&gt; 1,
        "articleId" =&gt; 3
        "content" =&gt; "I love SleekDB"
      ],
      ...
    ]
  ],
  ...
]</code></pre>
<h2>join()</h2>
<p>To join stores we use the join() method of the QueryBuilder object.</p>
<p>The join() method takes two arguments, those are:</p>
<pre><code class="language-php">function join(Closure $joinFunction, string $propertyName): QueryBuilder</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$joinFunction: Closure</h1>
<p>This anonymous function has to return the <code>result of an executed sub query</code> or prepare a sub query for the join and return it as a <code>QueryBuilder object</code>.</p>
</li>
<li>
<h1>$propertyName: string</h1>
<p>Name of the new property added to each document.</p>
</li>
</ol>
<h3>Example 1</h3>
<p>To get the users with their comments we would join like this:</p>
<pre><code class="language-php">use SleekDB\Store;

$userStore = new Store("users", $dataDir);
$commentStore = new Store("comments", $dataDir);

$users = $usersStore
  -&gt;createQueryBuilder()
  -&gt;join(function($user) use ($commentStore){
    // returns result
    return $commentStore-&gt;findBy([ "userId", "=", $user["_id"] ]);
  }, "comments")
  -&gt;getQuery()
  -&gt;fetch();

// or
$users = $userStore
  -&gt;createQueryBuilder()
  -&gt;join(function($user) use ($commentStore){
    // returns Querybuilder
    return $commentStore
      -&gt;createQueryBuilder()
      -&gt;where([ "userId", "=", $user["_id"] ]);
  }, "comments")
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<h3>Example 2</h3>
<p>Use multiple <code>join()</code>.<br/>
Retrieve all users with their comments and their articles.</p>
<pre><code class="language-php">use SleekDB\Store;

$userStore = new Store("users", $dataDir);
$commentStore = new Store("comments", $dataDir);
$articleStore = new Store("articles", $dataDir);

$users = $userStore
  -&gt;createQueryBuilder()
  -&gt;join(function($user) use ($commentStore) {
    // returns result
    return $commentStore-&gt;findBy([ "userId", "=", $user["_id"] ]);
  }, "comments")
  -&gt;join(function($user) use ($articleStore) {
    // returns result
    return $articleStore-&gt;findBy([ "author", "=", $user["_id"] ]);
  }, "articles")
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<h3>Example 3</h3>
<p>Use <code>join()</code> within a join sub query.<br/>
Retrieve all users with their created articles containing the comments.</p>
<pre><code class="language-php">use SleekDB\Store;

$userStore = new Store("users", $dataDir);
$commentStore = new Store("comments", $dataDir);
$articleStore = new Store("articles", $dataDir);

$users = $userStore
  -&gt;createQueryBuilder()
  -&gt;join(function($user) use ($articleStore, $commentStore){
    // returns QueryBuilder
    return $articleStore
      -&gt;createQueryBuilder()
      -&gt;where([ "author", "=", $user["_id"] ])
      -&gt;join(function($article) use ($commentStore){
        // returns result
        return $commentStore-&gt;findBy("articleId", "=", $article["_id"]);
      }, "comments");

  }, "articles")
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
            <div class="editlink" 
              file="join-stores.md" 
              version="2.14">
            </div>
          </div>
        
          <div class="intro" id="block_query">
            <h1>Query</h1>
<p>With the Query object you can execute a query.</p>
<p>To get the Query object use the <code>getQuery</code> method of the <a class="gotoblock" href="/#/query-builder">QueryBuilder</a> class:</p>
<pre><code class="language-php">$userQuery = $userQueryBuilder-&gt;getQuery();</code></pre>
<h2>Summary</h2>
<ul>
<li><a class="gotoblock" href="#/query#fetch">fetch</a></li>
<li><a class="gotoblock" href="#/query#first">first</a></li>
<li><a class="gotoblock" href="#/query#exists">exists</a></li>
<li><a class="gotoblock" href="#/query#update">update</a></li>
<li><a class="gotoblock" href="#/query#delete">delete</a></li>
<li><a class="gotoblock" href="#/query#removeFields">removeFields</a></li>
</ul>
<h2 id="query-fetch">fetch()</h2>
<p>Execute a query and retrieve an array containing all documents found.</p>
<pre><code class="language-php">function fetch(): array</code></pre>
<h3>Return value</h3>
<p>An array containing all documents found or an empty array.</p>
<h3>Example</h3>
<p>Retrieve all users that are located in london.</p>
<pre><code class="language-php">$user = $userQueryBuilder
  -&gt;where([ "city", "=", "london" ])
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<h4>Result</h4>
<pre><code>[
    [
        "_id" =&gt; 1,
        "name" =&gt; "John",
        "city" =&gt; "london"
    ],
    [
        "_id" =&gt; 4,
        "name" =&gt; "Max",
        "city" =&gt; "london"
    ],
    ...
]</code></pre>
<h2 id="query-first">first()</h2>
<p>It is more efficient than <code>fetch</code> but one caveat is that the <code>orderBy</code> will not work when using this method to get the very first item.</p>
<pre><code class="language-php">function first(): array</code></pre>
<h3>Return value</h3>
<p>Returns the very first document discovered or an empty array if nothing found.</p>
<h3>Example</h3>
<pre><code class="language-php">$user = $userQueryBuilder
  -&gt;where([ "email", "=", "foo@bar.com" ])
  -&gt;getQuery()
  -&gt;first();</code></pre>
<h4>Result</h4>
<pre><code>[
    "_id" =&gt; 1,
    "name" =&gt; "John",
    "email" =&gt; "foo@bar.com"
]</code></pre>
<h2 id="query-exists">exists()</h2>
<p>It is more efficient than using <code>fetch</code> to check if some data exists or not. For example, you may use exists method to check if a username or email address already exists or not.</p>
<pre><code class="language-php">function exists(): bool</code></pre>
<h3>Return value</h3>
<p>Returns <code>true</code> if a document exists and <code>false</code> if no document found.</p>
<h3>Example</h3>
<pre><code class="language-php">$userNameExists = $userQueryBuilder
  -&gt;where([ "username", "=", "foobar" ])
  -&gt;getQuery()
  -&gt;exists();</code></pre>
<h2 id="query-update">update()</h2>
<p>Update one or multiple documents based on a given query.</p>
<pre><code class="language-php">function update(array $updatable, bool $returnUpdatedDocuments = false): array|bool</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$updatable: array</h1>
<p>An array containing the properties to update.<br/>
Update of nested values possible by using a dot between fieldNames (Example 2)<br/>
If a field does not exist in a document, it will be added.</p>
</li>
</ol>
<h3>Return value</h3>
<p>If <strong>$returnUpdatedDocuments = false</strong>:<br/>
Returns <code>true</code> on success and <code>false</code> if no documents found to update.</p>
<p>If <strong>$returnUpdatedDocuments = true</strong>:<br/>
Returns <code>updated documents</code> on success and <code>false</code> if no documents found to update.</p>
<h3>Example 1</h3>
<p>Set the status of all users that are located in london to VIP.</p>
<pre><code class="language-php">$userStore
  -&gt;createQueryBuilder()
  -&gt;where([ "city", "=", "london" ])
  -&gt;getQuery()
  -&gt;update([ "status" =&gt; "VIP" ]);</code></pre>
<h3>Example 2</h3>
<p>Change the street of the user with _id = 24.<br/>
<strong>Note</strong>: The street is in a nested array.</p>
<pre><code class="language-php">$userStore
  -&gt;createQueryBuilder()
  -&gt;where("city", "=", "london")
  -&gt;update([ "address.street" =&gt; "first street" ]);</code></pre>
<h4>Result</h4>
<pre><code class="language-php">[
  [
    "city" =&gt; "london".
    "address" =&gt; [
      "street" =&gt; "first street",
      "postalCode" =&gt; "41824"
    ],
    ...
  ],
  ...
]</code></pre>
<h2 id="query-delete">delete()</h2>
<p>Delete one or multiple documents based on a given query.</p>
<pre><code class="language-php">function delete(int $returnOption = Query::DELETE_RETURN_BOOL)</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$returnOption: int</h1>
<p>Different return options provided with constants of the <code>Query</code> class</p>
<ul>
<li><code>Query::DELETE_RETURN_BOOL</code> (Default)<br/>Return true or false</li>
<li><code>Query::DELETE_RETURN_RESULTS</code><br/>Retrieve deleted files as an array</li>
<li><code>Query::DELETE_RETURN_COUNT</code><br/>Returns the amount of deleted documents</li>
</ul>
</li>
</ol>
<h3>Return value</h3>
<p>This method returns based on the given return option either <code>boolean</code>, <code>int</code> or <code>array</code>.</p>
<h3>Example 1</h3>
<p>Delete all users that are not active.</p>
<pre><code class="language-php">$result = $userStore
  -&gt;createQueryBuilder()
  -&gt;where([ "active", "=", false ])
  -&gt;getQuery()
  -&gt;delete();
// output: true</code></pre>
<h3>Example 2</h3>
<p>Delete all users that are not active and retrieve the amount of deleted users.</p>
<pre><code class="language-php">use SleekDB\Query;

$result = $userStore
  -&gt;createQueryBuilder()
  -&gt;where([ "active", "=", false ])
  -&gt;getQuery()
  -&gt;delete(Query::DELETE_RETURN_COUNT);
// output: 14</code></pre>
<h3>Example 3</h3>
<p>Delete all users that are not active and retrieve the deleted users.</p>
<pre><code class="language-php">use SleekDB\Query;

$result = $userStore
  -&gt;createQueryBuilder()
  -&gt;where([ "active", "=", false ])
  -&gt;getQuery()
  -&gt;delete(Query::DELETE_RETURN_RESULT);
// output: [ ["_id" =&gt; 1, "name" =&gt; "Max"], ["_id" =&gt; 4, "name" =&gt; "John"], ... ]</code></pre>
<h2 id="query-removeFields">removeFields()</h2>
<p>Remove fields of one or multiple documents based on current query.</p>
<pre><code class="language-php">function removeFields(array $fieldsToRemove): array|false</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$fieldsToRemove: array</h1>
<p>An array containing the fields to remove.<br/>
Update of nested values possible by using a dot between fieldNames (Example 2)</p>
</li>
</ol>
<h3>Return value</h3>
<p>Returns <code>updated documents</code> on success and <code>false</code> on failure.</p>
<h3>Example 1</h3>
<p>Remove the status field of all users that are located in london.</p>
<pre><code class="language-php">$userStore
  -&gt;createQueryBuilder()
  -&gt;where([ "city", "=", "london" ])
  -&gt;getQuery()
  -&gt;removeFields([ "status" ]);</code></pre>
<h3>Example 2</h3>
<p>Remove the street field of the user with _id = 24.<br/>
<strong>Note</strong>: The street is in a nested array.</p>
<pre><code class="language-php">$userStore
  -&gt;createQueryBuilder()
  -&gt;where("city", "=", "london")
  -&gt;removeFields([ "address.street" ]);</code></pre>
<h4>Result</h4>
<pre><code class="language-php">[
  [
    "city" =&gt; "london".
    "address" =&gt; [
      "postalCode" =&gt; "41824"
    ],
    ...
  ],
  ...
]</code></pre>
            <div class="editlink" 
              file="query.md" 
              version="2.14">
            </div>
          </div>
        
          <div class="intro" id="block_dates">
            <h1>Working with Dates</h1>
<p>SleekDB accepts instances of PHP's DateTime class to filter data.<br/>
Means you can check against an DateTime object.</p>
<p>The methods that accept DateTime objects as a value to check against are:</p>
<ul>
<li><a class="gotoblock" href="#/fetch-data#findBy">Store-&gt;findBy()</a></li>
<li><a class="gotoblock" href="#/fetch-data#findOneBy">Store-&gt;findOneBy()</a></li>
<li><a class="gotoblock" href="#/delete-data#deleteBy">Store-&gt;deleteBy()</a></li>
<li><a class="gotoblock" href="#/query-builder#where">QueryBuilder-&gt;where()</a></li>
<li><a class="gotoblock" href="#/query-builder#orWhere">QueryBuilder-&gt;orWhere()</a></li>
<li><a class="gotoblock" href="#/query-builder#having">QueryBuilder-&gt;having()</a></li>
</ul>
<p>The conditions you can use DateTime objects with are:</p>
<ul>
<li><code>=</code></li>
<li><code>===</code></li>
<li><code>==</code> (Type unsafe comparison)</li>
<li><code>!=</code></li>
<li><code>!==</code></li>
<li><code>&lt;&gt;</code> (Type unsafe comparison)</li>
<li><code>&gt;</code></li>
<li><code>&gt;=</code></li>
<li><code>&lt;</code></li>
<li><code>&lt;=</code></li>
<li><code>IN</code></li>
<li><code>NOT IN</code></li>
<li><code>BETWEEN</code></li>
<li><code>NOT BETWEEN</code></li>
<li><code>CONTAINS</code></li>
<li><code>NOT CONTAINS</code></li>
</ul>
<h2>Quick example</h2>
<pre><code class="language-php">require_once './vendor/autoload.php';

use SleekDB\Store;

// create store
$databaseDirectory = __DIR__ . "/database";
$newsStore = new Store("news", $databaseDirectory);

// Convert the date-strings to timestamps
$startDate = new \DateTime("2020-12-01");
$endDate = new \DateTime("2021-01-04");

// Get result
// WHERE releaseDate &gt;= "2020-12-01" AND releaseDate &lt;= "2021-01-04"
$news = $newsStore-&gt;findBy([ "releaseDate", "BETWEEN", [ $startDate, $endDate ] ] );</code></pre>
<h2>How does SleekDB use DateTime objects to filter data</h2>
<p>Internally SleekDB converts the value of the field (<strong>&quot;releaseDate&quot; in the example above</strong>) into a DateTime object and compares it with the given DateTime object.</p>
<p>That means if there is <strong>something stored in the field</strong> (for example &quot;releaseDate&quot;) that <strong><u>can not be converted</u> into a DateTime object</strong> SleekDB will <strong>throw an InvalidArgumentException</strong>.</p>
<p>Refer to the <a rel="noopener nofollow" href="https://www.php.net/manual/en/class.datetime.php" target="_blank">official PHP documentation</a> to learn more about DateTime objects. </p>
<p>SleekDB already handles the following values correctly, so no error will be thrown and you can use them for example to clarify that there is no release date for that document.</p>
<ul>
<li>0</li>
<li>0.0</li>
<li>&quot;0&quot;</li>
<li>&quot;&quot;</li>
<li>NULL</li>
<li>FALSE</li>
<li>array()</li>
</ul>
<h2>Best practice to store dates in the database</h2>
<p>You should either store the date and time as a string or as a timestamp.<br/>
<strong>We recommend</strong> storing the date and time as a <strong>timestamp</strong>.</p>
<h3>Example 1</h3>
<p>Store date as a string.</p>
<pre><code class="language-php">$newArticle = [
  "author" =&gt; "John",
  "title" =&gt; "Why everybody love SleekDB",
  "content" =&gt; "Because it's the best!",
  "releaseDate" =&gt; "2021-01-17"
];

$newArticle = $newsStore-&gt;insert($newArticle);</code></pre>
<h3>Example 2</h3>
<p>Store date as a timestamp.</p>
<pre><code class="language-php">$releaseDate = new \DateTime("2021-01-17");

$newArticle = [
  "author" =&gt; "John",
  "title" =&gt; "Why everybody love SleekDB",
  "content" =&gt; "Because it's the best!",
  "releaseDate" =&gt; $releaseDate-&gt;getTimestamp()
];

$newArticle = $newsStore-&gt;insert($newArticle);</code></pre>
<h3>Example 3</h3>
<p>Store current date and time.</p>
<pre><code class="language-php">$releaseDate = new \DateTime();

$newArticle = [
  "author" =&gt; "John",
  "title" =&gt; "Why everybody love SleekDB",
  "content" =&gt; "Because it's the best!",
  "createdAt" =&gt; $releaseDate-&gt;format("Y-m-d H:i:s")
];

// OR

$newArticle = [
  "author" =&gt; "John",
  "title" =&gt; "Why everybody love SleekDB",
  "content" =&gt; "Because it's the best!",
  "createdAt" =&gt; $releaseDate-&gt;getTimestamp()
];

$newArticle = $newsStore-&gt;insert($newArticle);</code></pre>
<h2>Not using DateTime</h2>
<p>If you don't want to use DateTime objects to filter data you don't have to.<br/>
To filter data without the need of DateTime objects we <strong>have to store the dates as a timestamp</strong>.</p>
<pre><code class="language-php">require_once './vendor/autoload.php';

use SleekDB\Store;

// create store
$databaseDirectory = __DIR__ . "/database";
$newsStore = new Store("news", $databaseDirectory);

// Insert an article
$releaseDate = new \DateTime("2021-01-17");
$newArticle = [
  "author" =&gt; "John",
  "title" =&gt; "Why everybody love SleekDB",
  "content" =&gt; "Because it's the best!",
  "createdAt" =&gt; $releaseDate-&gt;getTimestamp()
];
$newArticle = $newsStore-&gt;insert($newArticle);

// retrieve articles
$datesToFilter = [
  (new \DateTime("2020-12-01"))-&gt;getTimestamp(),
  (new \DateTime("2021-01-04"))-&gt;getTimestamp()
  (new \DateTime("2021-01-19"))-&gt;getTimestamp()
];
$news = $newsStore-&gt;findBy([ "releaseDate", "IN", $datesToFilter ] );
// WHERE releaseDate IN ("2020-12-01", "2021-01-04", "2021-01-19")</code></pre>
            <div class="editlink" 
              file="dates.md" 
              version="2.14">
            </div>
          </div>
        
          <div class="intro" id="block_searching">
            <h1>Searching</h1>
<p>SleekDB introduces with version 2.7 enhanced search functionality with <strong>search scores</strong>, <strong>different search algorithms</strong> and <strong>two search modes</strong>.</p>
<p>Searching through documents was never so easy and good before!</p>
<h2>Summary</h2>
<ul>
<li><a class="gotoblock" href="#/searching#configuration-options">Configuration options</a></li>
<li><a class="gotoblock" href="#/searching#mode-or">Mode: &quot;or&quot; (default)</a></li>
<li><a class="gotoblock" href="#/searching#mode-and">Mode: &quot;and&quot;</a></li>
<li><a class="gotoblock" href="#/searching#algorithm-hits">Algorithm: &quot;hits&quot; (default)</a></li>
<li><a class="gotoblock" href="#/searching#algorithm-hits_prioritize">Algorithm: &quot;hits_prioritze&quot;</a></li>
<li><a class="gotoblock" href="#/searching#algorithm-prioritize">Algorithm: &quot;prioritize&quot;</a></li>
<li><a class="gotoblock" href="#/searching#algorithm-prioritize">Algorithm: &quot;prioritize_position&quot;</a></li>
<li><a class="gotoblock" href="#/searching#query_builder"><code>search()</code> method of <code>QueryBuilder</code> class</a></li>
<li><a class="gotoblock" href="#/searching#store"><code>search()</code> method of <code>Store</code> class</a></li>
</ul>
<h2>Cofiguration options</h2>
<p>You can configure the bahaviour of SleekDB regarding searching <a class="gotoblock" href="#/configurations">Store wide</a> and on a query by query bases.</p>
<pre><code class="language-php">// Store wide configuration when creating a store

$configuration = [
  "search" =&gt; [
    "min_length" =&gt; 2,
    "mode" =&gt; "or",
    "score_key" =&gt; "scoreKey",
    "algorithm" =&gt; Query::SEARCH_ALGORITHM["hits"]
  ]
];

$store = new Store("users", __DIR__ . "/database", $configuration);</code></pre>
<pre><code class="language-php">// On a query by query bases

$searchOptions = [
  "minLength" =&gt; 2,
  "mode" =&gt; "or",
  "scoreKey" =&gt; "scoreKey",
  "algorithm" =&gt; Query::SEARCH_ALGORITHM["hits"]
];

$userStore = new Store("users", __DIR__ . "/database");

$userStore-&gt;createQueryBuilder()
  -&gt;search(["profileDescription"], "SleekDB", $searchOptions)
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<h3>&quot;min_length&quot; and &quot;minLength&quot;</h3>
<p>It has to be an <code>integer</code> &gt; 0.<br/>
The minimum length of a word within the search query that will be used for searching.<br/>
If it is for example set to the value of 2 (default) and the user searches for: &quot;I love SleekDB&quot;.<br/>
The words &quot;love&quot; and &quot;SleekDB&quot; will be used for searching and the word &quot;I&quot; will be ignored.<br/>
That means with the configuration of 2 all words &gt;= 2 are considered when searching.</p>
<h3>&quot;mode&quot;</h3>
<p>Has to be a <code>string</code>.<br/>
SleekDB provides two modes.</p>
<ul>
<li>&quot;or&quot;</li>
<li>&quot;and&quot;</li>
</ul>
<h3>&quot;score_key&quot; and &quot;scoreKey&quot;</h3>
<p>Can be a <code>string</code> or <code>null</code>.<br/>
If this configuration is <code>null</code> no field containing the score will be applied to the documents.<br/>
If it is a <code>string</code> a new field with the specified field name will be applied to every document, which will contain the search score and can be used to for example sort the documents.</p>
<h3>algorithm</h3>
<p>SleekDB provides 4 search algorithms. <code>hits</code>, <code>hits_prioritize</code>, <code>prioritize</code>, <code>prioritize_position</code><br/>
These algorithms change the score generation.<br/>
They are available as a <strong>constant of the <code>Query</code> class</strong>.</p>
<p>Example:</p>
<pre><code class="language-php">Query::SEARCH_ALGORITHM["hits"] // default</code></pre>
<h2 id="searching-mode-or">Mode: &quot;or&quot; (default)</h2>
<p>With this mode a field has to contain <strong>one</strong> of the words in the search query to be considered as a search result.<rb/>
For example our query is &quot;Where School&quot; and we have three values to check agains:</p>
<ul>
<li>&quot;Where do you think is the best school?&quot;
<ul>
<li>Two search hits</li>
</ul></li>
<li>&quot;School is cool, but where is the best one?&quot;
<ul>
<li>Two search hits</li>
</ul></li>
<li>&quot;Why everybody love School&quot;
<ul>
<li>One search hit</li>
</ul></li>
</ul>
<h2 id="searching-mode-and">Mode: &quot;and&quot;</h2>
<p>With this search mode a field has to contain <strong>all</strong> words of the search query to be considered as a search result.<br/>
For example our query is &quot;Where School&quot; and we have two values to check agains:</p>
<ul>
<li>&quot;<strong>School</strong> is cool, but <strong>where</strong> is the best one?&quot;
<ul>
<li>Search hit</li>
</ul></li>
<li>&quot;Is your <strong>school</strong> the best?&quot;
<ul>
<li>No Search hit</li>
</ul></li>
</ul>
<h2 id="searching-algorithm-hits">Algorithm: &quot;hits&quot; (default)</h2>
<pre><code class="language-php">Query::SEARCH_ALGORITHM["hits"]</code></pre>
<p>This is the default algorithm.<br/>
The score is based on the <strong>amount of search hits</strong>.</p>
<h2 id="searching-algorithm-hits_prioritize">Algorithm: &quot;hits_prioritize&quot;</h2>
<pre><code class="language-php">Query::SEARCH_ALGORITHM["hits_prioritize"]</code></pre>
<p>The score is based on the <strong>amount of search hits</strong> but if two or more <strong>documents have the same amount of search hits</strong> the <strong>order of the given fields</strong> to search through is taken into consideration.<br/>
For example we search through two fields: [&quot;title&quot;, &quot;content&quot;]<br/>
Then the title field gets more weight.<br/>
If one document has two hits in the title and three in the content field, it will have a lesser score than a document that has three hits in the title and two in the content field.</p>
<h2 id="searching-algorithm-prioritize">Algorithm: &quot;prioritize&quot;</h2>
<pre><code class="language-php">Query::SEARCH_ALGORITHM["prioritize"]</code></pre>
<p><strong>The order of the fields</strong> are a big part of the score.<br/>
For example we search through two fields: [&quot;title&quot;, &quot;content&quot;]<br/>
If one document has one search hit in the title field it will have a higher score than a document that has no search hits in the title field but 61 search hits in the content field.</p>
<h2 id="searching-algorithm-prioritize_position">Algorithm: &quot;prioritize_position&quot;</h2>
<pre><code class="language-php">Query::SEARCH_ALGORITHM["prioritize_position"]</code></pre>
<p>This algorithm does the same as the &quot;prioritize&quot; algorithm.<br/>
The difference is, that it also <strong>consideres the position of the first search hit</strong> when generating a score.<br/>
For example we have two documents with the same amount of search hits in the same fields.<br/>
The first one has the first search hit at position 3 and the second one at position 4. Then the first document will have a higher score.</p>
<h2 id="searching-query_builder">search() method of <code>QueryBuilder</code> class</h2>
<p>Do a fulltext like search against one or multiple fields.</p>
<pre><code class="language-php">function search(array|string $fields, string $query, array $options = []): QueryBuilder</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$fields: array|string</h1>
<p>An array containg all fields to search against.</p>
<ul>
<li>&quot;title&quot;</li>
<li>[&quot;title&quot;]</li>
<li>[&quot;title&quot;, &quot;content&quot;, ...]</li>
</ul>
<p>As our documents are basically JSON documents it also could have nested properties.</p>
<p>To target nested properties we use a single dot between the property/field name.</p>
<p><strong>Example:</strong> <code>address.street</code></p>
</li>
<li>
<h1>$query: string</h1>
<p>The search query.</p>
</li>
<li>
<h1>$options: array</h1>
<p>Configure the search behaviour on a query by query base.</p>
</li>
</ol>
<h3>Example 1</h3>
<p>Search phrase: &quot;SleekDB is the best database solution&quot;.<br/>
Search through all news articles &quot;title&quot;, &quot;description&quot; and &quot;content&quot; fields, sort the result by relevance and dont return the score key field.</p>
<pre><code class="language-php">$newsStore = new Store("news", __DIR__ . "/database");

$searchQuery = "SleekDB is the best database solution";

$result = $newsStore-&gt;createQueryBuilder()
  -&gt;search(["title", "description", "content"], $searchQuery)
  -&gt;orderBy(["searchScore" =&gt; "DESC"]) // sort result
  -&gt;except(["searchScore"]) // exclude field from result
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<h3>Example 2</h3>
<p>Search phrase: &quot;SleekDB is the best database solution&quot;.<br/>
Search through all news articles &quot;title.mainTitle&quot; and &quot;content&quot; fields, sort the result by relevance and exclude the score key from the result.<br/>
Also change the search algorithm to &quot;prioritize&quot; for this query and limit the result to 20.</p>
<pre><code class="language-php">// Example article:
// [
//   "_id" =&gt; 1,
//   "title" =&gt; [
//     "mainTitle" =&gt; "SleekDB is the best database!"
//   ],
//   "content" =&gt; "A NoSQL dabase completely made with PHP.",
// ]

$newsStore = new Store("news", __DIR__ . "/database");

$searchQuery = "SleekDB is the best database solution";

$searchOptions = [
  "algorithm" =&gt; Query::SEARCH_ALGORITHM["prioritize"]
];

$result = $newsStore
  -&gt;search(["title.mainTitle", "content"], $searchQuery, $searchOptions)
  -&gt;orderBy(["searchScore" =&gt; "DESC"])
  -&gt;except(["searchScore"])
  -&gt;limit(20)
  -&gt;getQuery()
  -&gt;fetch();</code></pre>
<h2 id="searching-store">search() method of <code>Store</code> class</h2>
<p>Do a fulltext like search against one or multiple fields.</p>
<pre><code class="language-php">function search(array $fields, string $query, array $orderBy = null, int $limit = null, int $offset = null): array</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$fields: array</h1>
<p>An array containg all fields to search against.</p>
<ul>
<li>[&quot;title&quot;]</li>
<li>[&quot;title&quot;, &quot;content&quot;, ...]</li>
</ul>
<p>As our documents are basically JSON documents it also could have nested properties.</p>
<p>To target nested properties we use a single dot between the property/field name.</p>
<p><strong>Example:</strong> <code>address.street</code></p>
</li>
<li>
<h1>$query: string</h1>
<p>The search query.    </p>
</li>
<li>
<h1>$orderBy: array</h1>
<p>Sort the result by one or multiple fields.</p>
<ul>
<li>[&quot;name&quot; =&gt; &quot;asc&quot;]</li>
<li>[&quot;name&quot; =&gt; &quot;asc&quot;, &quot;age&quot; =&gt; &quot;desc&quot;]</li>
</ul>
</li>
<li>
<h1>$limit: int</h1>
<p>Limit the result to a specific amount.</p>
</li>
<li>
<h1>$offset: offset</h1>
<p>Skip a specific amount of documents.</p>
</li>
</ol>
<h3>Return value</h3>
<p>Will return an <code>array</code> containg all documents having at least one search hit or an <code>empty array</code>.</p>
<h3>Example 1</h3>
<p>Search phrase: &quot;SleekDB is the best database solution&quot;.<br/>
Search through all news articles &quot;title&quot;, &quot;description&quot; and &quot;content&quot; fields and sort the result by relevance.</p>
<pre><code class="language-php">$newsStore = new Store("news", __DIR__ . "/database");

$searchQuery = "SleekDB is the best database solution";

$result = $newsStore-&gt;search(["title", "description", "content"], $searchQuery, ["searchScore" =&gt; "DESC"]);</code></pre>
<h3>Example 2</h3>
<p>Search phrase: &quot;SleekDB is the best database solution&quot;.<br/>
Search through all news articles &quot;title.mainTitle&quot;, &quot;title.subTitle&quot; and &quot;content&quot; fields and sort the result by relevance.</p>
<pre><code class="language-php">// Example article:
// [
//   "_id" =&gt; 1,
//   "title" =&gt; [
//     "mainTitle" =&gt; "SleekDB is the best database!",
//     "subTitle" =&gt; "Just believe me!"
//   ],
//   "content" =&gt; "A NoSQL dabase completely made with PHP.",
// ]

$newsStore = new Store("news", __DIR__ . "/database");

$searchQuery = "SleekDB is the best database solution";

$result = $newsStore-&gt;search(
  ["title.mainTitle", "title.subTitle", "content"], // fields
  $searchQuery, // query
  ["searchScore" =&gt; "DESC"] // orderBy
);</code></pre>
            <div class="editlink" 
              file="searching.md" 
              version="2.14">
            </div>
          </div>
        
          <div class="intro" id="block_execution-order">
            <h1>Order of Execution</h1>
<h2>Summary</h2>
<ul>
<li><a class="gotoblock" href="#/execution-order#general-life-cycle">General Life Cycle</a></li>
<li><a class="gotoblock" href="#/execution-order#query">Order of query execution</a>
<ol>
<li><a class="gotoblock" href="#/execution-order#query-where">WHERE</a></li>
<li><a class="gotoblock" href="#/execution-order#query-distinct">DISTINCT</a></li>
<li><a class="gotoblock" href="#/execution-order#query-join">JOIN</a></li>
<li><a class="gotoblock" href="#/execution-order#query-search">SEARCH</a></li>
<li><a class="gotoblock" href="#/execution-order#query-select1">SELECT - Step 1</a></li>
<li><a class="gotoblock" href="#/execution-order#query-groupBy">GROUP BY</a></li>
<li><a class="gotoblock" href="#/execution-order#query-select2">SELECT - Step 2</a></li>
<li><a class="gotoblock" href="#/execution-order#query-having">HAVING</a></li>
<li><a class="gotoblock" href="#/execution-order#query-except">EXCEPT (Remove fields)</a></li>
<li><a class="gotoblock" href="#/execution-order#query-orderBy">ORDER BY</a></li>
<li><a class="gotoblock" href="#/execution-order#query-skip">SKIP</a></li>
<li><a class="gotoblock" href="#/execution-order#query-limit">LIMIT</a></li>
</ol></li>
</ul>
<h2 id="execution-order-general-life-cycle">General Life Cycle</h2>
<p>Each query will follow the below steps or execution life cycle.</p>
<ol>
<li>
<h1>Store</h1>
<p>The <code>Store</code> class is the first, and in most cases also the only part you need to come in contact with.</p>
</li>
<li>
<h1>Query Builder</h1>
<p>The <code>QueryBuilder</code> class is used to prepare a query. It can be retrieved with <code>Store-&gt;createQueryBuilder()</code>.</p>
</li>
<li>
<h1>Query</h1>
<p>The <code>Query</code> class contains all information needed to execute the query and is used to do so.<br/>
The <code>Query object</code> can be retrieved using the <code>QueryBuilder-&gt;getQuery()</code> method.</p>
</li>
<li>
<h1>Cache</h1>
<p>The <code>Cache</code> class handles everything regarding caching. It will decide when to cache or not to cache.<br/>
It is mainly designed for internal use but can be retrieved using <code>Query-&gt;getCache()</code>.</p>
</li>
</ol>
<h2 id="execution-order-query">Order of query execution</h2>
<p>The following diagram represents the internal order of execution when using the <code>Query-&gt;fetch()</code> method.</p>
<ul>
<li><a class="gotoblock" href="#/query#fetch">Query-&gt;fetch()</a></li>
</ul>
<div style="max-width: 400px; padding-left: 15px; padding-right: 15px;">
   <a href="/assets/query-execution-order.png">
      <img src="/assets/query-execution-order.png" style="width: 100%;">
   </a>
</div>
<h3>Single document</h3>
<ol>
<li>
<h1 id="execution-order-query-where">WHERE</h1>
<p>The <code>where</code> and <code>orWhere</code> conditions are used to determine if a document will be a part of the result set or not.</p>
<ul>
<li><a class="gotoblock" href="#/query-builder#where">QueryBuilder-&gt;where()</a></li>
<li><a class="gotoblock" href="#/query-builder#orWhere">QueryBuilder-&gt;orWhere()</a></li>
</ul>
</li>
<li>
<h1 id="execution-order-query-distinct">DISTINCT</h1>
<p>If the <code>WHERE</code> resulted in <code>true</code> the document is checked against the result set using the fields defined with the <code>distict()</code> method.</p>
<ul>
<li><a class="gotoblock" href="#/query-builder#distinct">QueryBuilder-&gt;distinct()</a></li>
</ul>
</li>
</ol>
<h3>All documents in result set</h3>
<p>Now we have all documents in a result array.</p>
<ol start="3">
<li>
<h1 id="execution-order-query-join">JOIN</h1>
<p>All documents will be joined with one or multiple stores.</p>
<ul>
<li><a class="gotoblock" href="#/query-builder#join">QueryBuilder-&gt;join()</a></li>
</ul>
</li>
<li>
<h1 id="execution-order-query-search">SEARCH</h1>
<p>We go through all documents and check if they contain what we search, if not we remove them from the result array.</p>
<ul>
<li><a class="gotoblock" href="#/query-builder#search">QueryBuilder-&gt;search()</a></li>
</ul>
</li>
<li>
<h1 id="execution-order-query-select1">SELECT - Step 1</h1>
<p>Apply select functions that do not reduce the result amount to one and apply their aliases.</p>
<ul>
<li><a class="gotoblock" href="#/query-builder#select">QueryBuilder-&gt;select()</a></li>
</ul>
</li>
<li>
<h1 id="execution-order-query-groupBy">GROUP BY</h1>
<p>Group documents by fields defined with <code>groupBy()</code>.</p>
<ul>
<li><a class="gotoblock" href="#/query-builder#groupBy">QueryBuilder-&gt;groupBy()</a></li>
</ul>
</li>
<li>
<h1 id="execution-order-query-select2">SELECT - Step 2</h1>
<p>Select specific fields and apply their aliases, if they have one.<br/>
Apply select functions that reduce result amount to one and their aliases.<br/>
<strong>Amount will not be reduced when using Group-By.</strong></p>
<ul>
<li><a class="gotoblock" href="#/query-builder#select">QueryBuilder-&gt;select()</a></li>
</ul>
<p>Functions that reduce the amount of the result set to one:</p>
<ul>
<li><code>SUM</code></li>
<li><code>MAX</code></li>
<li><code>MIN</code></li>
<li><code>AVG</code></li>
</ul>
</li>
<li>
<h1 id="execution-order-query-having">HAVING</h1>
<p>Check all documents using the criteria specified with <code>having</code>.</p>
<ul>
<li><a class="gotoblock" href="#/query-builder#having">QueryBuilder-&gt;having()</a></li>
</ul>
</li>
<li>
<h1 id="execution-order-query-except">EXCEPT (Remove fields)</h1>
<p>Exclude/ Remove fields from all documents.</p>
<ul>
<li><a class="gotoblock" href="#/query-builder#except">QueryBuilder-&gt;except()</a></li>
</ul>
</li>
<li>
<h1 id="execution-order-query-orderBy">ORDER BY</h1>
<p>Sort the result array using one or multiple fields.</p>
<ul>
<li><a class="gotoblock" href="#/query-builder#orderBy">QueryBuilder-&gt;orderBy()</a></li>
</ul>
</li>
<li>
<h1 id="execution-order-query-skip">SKIP</h1>
<p>Skip a specific amount of documents. (Slice the result array)</p>
<ul>
<li><a class="gotoblock" href="#/query-builder#skip">QueryBuilder-&gt;skip()</a></li>
</ul>
</li>
<li>
<h1 id="execution-order-query-limit">LIMIT</h1>
<p>Limit the amount of documents in result. (Slice the result array)</p>
<ul>
<li><a class="gotoblock" href="#/query-builder#limit">QueryBuilder-&gt;limit()</a></li>
</ul>
</li>
</ol>
            <div class="editlink" 
              file="execution-order.md" 
              version="2.14">
            </div>
          </div>
        
          <div class="intro" id="block_advanced">
            <h1>Advanced</h1>
<h2>Changing Store destination</h2>
<p>With the <code>changeStore()</code> method of the <code>Store</code> class you can change the destination of that store object.<br/>
That allows you to use one Store object to manage multiple stores.</p>
<pre><code class="language-php">function changeStore(string $storeName, string $dataDir = null, array $configuration = []): Store</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$storeName: string</h1>
<p>Name of new store destination</p>
</li>
<li>
<h1>$dataDir: string</h1>
<p>If null previous database directory destination will be used.</p>
</li>
<li>
<h1>$configuration</h1>
<p>If empty previous configurations remain.</p>
</li>
</ol>
<h3>Example</h3>
<pre><code class="language-php">/* create store */
$store = new Store("users", __DIR__ . "/database");

/* insert new user */
$store-&gt;insert(["username" =&gt; "admin"]);

/* change store destination */
$store-&gt;changeStore("alerts");

/* insert a new alert into the alerts store */
$store-&gt;insert(["content" =&gt; "new user with username admin added."]);</code></pre>
<h2>Keeping QueryBuilder object</h2>
<p>When you use the <code>createQueryBuilder()</code> method you get a new QueryBuilder object, that means your conditions are reset to default.</p>
<p>You can keep the QueryBuilder object and reuse it to add new conditions.</p>
<h3>Example</h3>
<pre><code class="language-php">$userQueryBuilder = $userStore-&gt;createQueryBuilder();

$userQueryBuilder-&gt;where([ 'products.totalBought', '&gt;', 0 ]);

$userQueryBuilder-&gt;where([ 'products.totalSaved', '&gt;', 0 ]);

// fetch all users that have totalBought &gt; 0 and totalSaved &gt; 0
$users = $userQueryBuilder-&gt;getQuery()-&gt;fetch();

// add new condition
$userQueryBuilder-&gt;where([ 'active', '=', true ]);

// fetch all users that have totalBought &gt; 0, totalSaved &gt; 0 and are active
$usersActive = $userQueryBuilder-&gt;getQuery()-&gt;fetch();</code></pre>
<h2>Keeping Query object</h2>
<p>If you want to keep the conditions and perform additional operations then you may want to keep the Query object.</p>
<p>Here is an example showing how you may fetch data and then update on the discovered documents without running an additional query:</p>
<h3>Example</h3>
<pre><code class="language-php">$userQuery = $userStore-&gt;createQueryBuilder()
  -&gt;where('products.totalBought', '&gt;', 0)
  -&gt;where('products.totalSaved', '&gt;', 0)
  -&gt;getQuery();

// Fetch data.
$users = $userQuery-&gt;fetch();

// Update matched documents.
$userQuery-&gt;update([
  'someRandomData' =&gt; '123',
]);

// Fetch data again.
$usersUpdated = $userQuery-&gt;fetch();</code></pre>
            <div class="editlink" 
              file="advanced.md" 
              version="2.14">
            </div>
          </div>
        
          <div class="intro" id="block_complete-examples">
            <h1>Some complete code examples</h1>
<p>We assume you read the documentation so you can understand the following small code examples.</p>
<h2>Summary</h2>
<ul>
<li>
<p><a class="gotoblock" href="#/complete-examples#insert-one">Insert one document</a></p>
</li>
<li>
<p><a class="gotoblock mb" href="#/complete-examples#insert-multiple">Insert multiple documents</a></p>
</li>
<li>
<p><a class="gotoblock" href="#/complete-examples#retrieve-store">Retrieve document/s using just the Store class</a></p>
</li>
<li>
<p><a class="gotoblock mb" href="#/complete-examples#retrieve-query_builder">Retrieve document/s using the QueryBuilder class</a></p>
</li>
<li>
<p><a class="gotoblock mb" href="#/complete-examples#edit-query_builder">Editing/ Updating documents using the QueryBuilder class</a></p>
</li>
<li>
<p><a class="gotoblock mb" href="#/complete-examples#group">Grouping documents</a></p>
</li>
<li>
<p><a class="gotoblock" href="#/complete-examples#search-store">Searching documents using just the Store object</a></p>
</li>
<li>
<p><a class="gotoblock" href="#/complete-examples#search-query_builder">Searching documents using the QueryBuilder object</a></p>
</li>
</ul>
<h2 id="complete-examples-insert-one">Insert one document</h2>
<pre><code class="language-php">require_once "./vendor/autoload.php";

use SleekDB\Store;
use SleekDB\Query;

$databaseDirectory = __DIR__."/database";

// applying the store configuration is optional
$storeConfiguration = [
  "auto_cache" =&gt; true,
  "cache_lifetime" =&gt; null,
  "timeout" =&gt; 120,
  "primary_key" =&gt; "_id",
  "search" =&gt; [
    "min_length" =&gt; 2,
    "mode" =&gt; "or",
    "score_key" =&gt; "scoreKey",
    "algorithm" =&gt; Query::SEARCH_ALGORITHM["hits"]
  ]
];

// creating a new store object
$userStore = new Store("users", $databaseDirectory, $storeConfiguration);

$newUser = [
  "username" =&gt; "Bob",
  "age" =&gt; 20,
  "address" =&gt; [
    "street" =&gt; "down street",
    "streetNumber" =&gt; 12,
    "postalCode" =&gt; "8174",
  ],
];

$newUser = $userStore-&gt;insert($newUser);

// Output user with its unique id.
header("Content-Type: application/json");

echo json_encode($newUser);</code></pre>
<h2 id="complete-examples-insert-multiple">Insert multiple documents</h2>
<pre><code class="language-php">require_once "./vendor/autoload.php";

use SleekDB\Store;
use SleekDB\Query;

$databaseDirectory = __DIR__."/database";

// applying the store configuration is optional
$storeConfiguration = [
  "auto_cache" =&gt; true,
  "cache_lifetime" =&gt; null,
  "timeout" =&gt; 120,
  "primary_key" =&gt; "_id",
  "search" =&gt; [
    "min_length" =&gt; 2,
    "mode" =&gt; "or",
    "score_key" =&gt; "scoreKey",
    "algorithm" =&gt; Query::SEARCH_ALGORITHM["hits"]
  ]
];

// creating a new store object
$userStore = new Store("users", $databaseDirectory, $storeConfiguration);

$newUsers = [
  [
    "username" =&gt; "Lisa",
    "age" =&gt; 17,
    "address" =&gt; [
      "street" =&gt; "up street",
      "streetNumber" =&gt; 48,
      "postalCode" =&gt; "1822",
    ],
  ],
  [
    "username" =&gt; "Bob",
    "age" =&gt; 20,
    "address" =&gt; [
      "street" =&gt; "down street",
      "streetNumber" =&gt; 12,
      "postalCode" =&gt; "8174",
    ],
  ]
];

$newUsers = $userStore-&gt;insertMany($newUsers);

// Output users with their unique id.
header("Content-Type: application/json");

echo json_encode($newUsers);</code></pre>
<h2 id="complete-examples-retrieve-store">Retrieving documents using just the Store object</h2>
<pre><code class="language-php">require_once "./vendor/autoload.php";

use SleekDB\Store;
use SleekDB\Query;

$databaseDirectory = __DIR__."/database";

// applying the store configuration is optional
$storeConfiguration = [
  "auto_cache" =&gt; true,
  "cache_lifetime" =&gt; null,
  "timeout" =&gt; 120,
  "primary_key" =&gt; "_id",
  "search" =&gt; [
    "min_length" =&gt; 2,
    "mode" =&gt; "or",
    "score_key" =&gt; "scoreKey",
    "algorithm" =&gt; Query::SEARCH_ALGORITHM["hits"]
  ]
];

// creating a new store object
$userStore = new Store("users", $databaseDirectory, $storeConfiguration);

$whereCondition = [
  ["location", "IN", ["new york", "london"]],
  "OR",
  ["age", "&gt;", 29]
];

// Pagination
$page = 1;
$limit = 10;
$skip = ($page - 1) * $limit;

// order by _id and limit result to 10
$result = $userStore-&gt;findBy($whereCondition, ["_id" =&gt; "DESC"], $limit, $skip);

// Output
header("Content-Type: application/json");

echo json_encode($result);</code></pre>
<h2 id="complete-examples-retrieve-query_builder">Retrieving documents using the QueryBuilder object</h2>
<pre><code class="language-php">require_once "./vendor/autoload.php";

use SleekDB\Store;
use SleekDB\Query;

$databaseDirectory = __DIR__."/database";

// applying the store configuration is optional
$storeConfiguration = [
  "auto_cache" =&gt; true,
  "cache_lifetime" =&gt; null,
  "timeout" =&gt; 120,
  "primary_key" =&gt; "_id",
  "search" =&gt; [
    "min_length" =&gt; 2,
    "mode" =&gt; "or",
    "score_key" =&gt; "scoreKey",
    "algorithm" =&gt; Query::SEARCH_ALGORITHM["hits"]
  ]
];

// creating a new store object
$userStore = new Store("users", $databaseDirectory, $storeConfiguration);

// Pagination
$page = 1;
$limit = 10;
$skip = ($page - 1) * $limit;

$result = $userStore-&gt;createQueryBuilder()
  -&gt;where([
    ["location", "IN", ["new york", "london"]],
    "OR",
    ["age", "&gt;", 29]
  ])
  -&gt;orderBy(["_id" =&gt; "DESC"])
  -&gt;limit($limit)
  -&gt;skip($skip)
  -&gt;getQuery()
  -&gt;fetch();

// Output
header("Content-Type: application/json");

echo json_encode($result);</code></pre>
<h2 id="complete-examples-edit-query_builder">Editing/ Updating documents using the QueryBuilder object</h2>
<pre><code class="language-php">require_once "./vendor/autoload.php";

use SleekDB\Store;
use SleekDB\Query;

$databaseDirectory = __DIR__."/database";

// applying the store configuration is optional
$storeConfiguration = [
  "auto_cache" =&gt; true,
  "cache_lifetime" =&gt; null,
  "timeout" =&gt; 120,
  "primary_key" =&gt; "_id",
  "search" =&gt; [
    "min_length" =&gt; 2,
    "mode" =&gt; "or",
    "score_key" =&gt; "scoreKey",
    "algorithm" =&gt; Query::SEARCH_ALGORITHM["hits"]
  ]
];

// creating a new store object
$userStore = new Store("users", $databaseDirectory, $storeConfiguration);

$result = $userStore-&gt;createQueryBuilder()
  -&gt;where([
    ["location", "IN", ["new york", "london"]],
    "OR",
    ["age", "&gt;", 29]
  ])
  -&gt;orderBy(["_id" =&gt; "DESC"])
  -&gt;getQuery()
  -&gt;update(["status" =&gt; "VIP"]);

// Output
header("Content-Type: application/json");

echo json_encode($result);</code></pre>
<h2 id="complete-examples-group">Grouping documents</h2>
<pre><code class="language-php">require_once "./vendor/autoload.php";

use SleekDB\Store;
use SleekDB\Query;

$databaseDirectory = __DIR__."/database";

// applying the store configuration is optional
$storeConfiguration = [
  "auto_cache" =&gt; true,
  "cache_lifetime" =&gt; null,
  "timeout" =&gt; 120,
  "primary_key" =&gt; "_id",
  "search" =&gt; [
    "min_length" =&gt; 2,
    "mode" =&gt; "or",
    "score_key" =&gt; "scoreKey",
    "algorithm" =&gt; Query::SEARCH_ALGORITHM["hits"]
  ]
];

// creating a new store object
$userStore = new Store("users", $databaseDirectory, $storeConfiguration);

// Pagination
$page = 1;
$limit = 10;
$skip = ($page - 1) * $limit;

$result = $userStore-&gt;createQueryBuilder()
  -&gt;where([ "location", "IN", ["new york", "london"] ])
  -&gt;select([ "age", "peopleCount", "followerAmount" =&gt; ["SUM" =&gt; "followers"] ])
  -&gt;groupBy(["age"], "peopleCount", true)
  -&gt;having([ ["followerAmount", "&gt;", 100], "OR", ["age", "&lt;", 16] ])
  -&gt;orderBy(["followerAmount" =&gt; "DESC"])
  -&gt;limit($limit)
  -&gt;skip($skip)
  -&gt;getQuery()
  -&gt;fetch();

// Output
header("Content-Type: application/json");

echo json_encode($result);</code></pre>
<h2 id="complete-examples-search-store">Searching documents using just the Store object</h2>
<pre><code class="language-php">require_once "./vendor/autoload.php";

use SleekDB\Store;
use SleekDB\Query;

$databaseDirectory = __DIR__."/database";

// applying the store configuration is optional
$storeConfiguration = [
  "auto_cache" =&gt; true,
  "cache_lifetime" =&gt; null,
  "timeout" =&gt; 120,
  "primary_key" =&gt; "_id",
  "search" =&gt; [
    "min_length" =&gt; 2,
    "mode" =&gt; "or",
    "score_key" =&gt; "scoreKey",
    "algorithm" =&gt; Query::SEARCH_ALGORITHM["hits"]
  ]
];

// creating a new store object
$newsStore = new Store("news", $databaseDirectory, $storeConfiguration);

// Pagination
$page = 1;
$limit = 10;
$skip = ($page - 1) * $limit;

$searchQuery = "SleekDB best database";

$result = $newsStore-&gt;search(
    ["title", "content"], 
    $searchQuery, 
    ["scoreKey" =&gt; "DESC"],
    $limit,
    $skip
  );

// Output
header("Content-Type: application/json");

echo json_encode($result);</code></pre>
<h2 id="complete-examples-search-query_builder">Searching documents using the QueryBuilder object</h2>
<pre><code class="language-php">require_once "./vendor/autoload.php";

use SleekDB\Store;
use SleekDB\Query;

$databaseDirectory = __DIR__."/database";

// applying the store configuration is optional
$storeConfiguration = [
  "auto_cache" =&gt; true,
  "cache_lifetime" =&gt; null,
  "timeout" =&gt; 120,
  "primary_key" =&gt; "_id",
  "search" =&gt; [
    "min_length" =&gt; 2,
    "mode" =&gt; "or",
    "score_key" =&gt; "scoreKey",
    "algorithm" =&gt; Query::SEARCH_ALGORITHM["hits"]
  ]
];

// creating a new store object
$newsStore = new Store("news", $databaseDirectory, $storeConfiguration);

// Pagination
$page = 1;
$limit = 10;
$skip = ($page - 1) * $limit;

$searchQuery = "SleekDB best database";

$result = $newsStore-&gt;createQueryBuilder()
  -&gt;search(["title", "content"], $searchQuery)
  -&gt;orderBy(["searchScore" =&gt; "DESC"])
  -&gt;except(["searchScore"]) // remove score from result
  -&gt;limit($limit)
  -&gt;skip($skip)
  -&gt;getQuery()
  -&gt;fetch();

// Output
header("Content-Type: application/json");

echo json_encode($result);</code></pre>
            <div class="editlink" 
              file="complete-examples.md" 
              version="2.14">
            </div>
          </div>
        
          <div class="intro" id="block_cache">
            <h1>Cache</h1>
<p>With the Cache class you can control Caching in a deeper way.</p>
<p>That said, this class is <strong><code>mainly for internal use</code></strong> and normally that kind of deep cache control is not needed.</p>
<blockquote>
<p>‚ö†Ô∏èÔ∏è Be careful when using the <code>Cache</code> object.</p>
</blockquote>
<p>To retrieve the Cache object use the <code>getCache</code> method of the <code>Query</code> class.</p>
<pre><code class="language-php">$cache = $userQuery-&gt;getCache();</code></pre>
<h2>Summary</h2>
<ul>
<li><a class="gotoblock" href="#/cache#getToken">getToken</a></li>
<li><a class="gotoblock" href="#/cache#delete">delete</a></li>
<li><a class="gotoblock" href="#/cache#deleteAll">deleteAll</a></li>
<li><a class="gotoblock" href="#/cache#deleteAllWithNoLifetime">deleteAllWithNoLifetime</a></li>
<li><a class="gotoblock" href="#/cache#set">set</a></li>
<li><a class="gotoblock" href="#/cache#get">get</a></li>
<li><a class="gotoblock" href="#/cache#getCachePath">getCachePath</a></li>
<li><a class="gotoblock" href="#/cache#setLifetime">setLifetime</a></li>
<li><a class="gotoblock" href="#/cache#getLifetime">getLifetime</a></li>
</ul>
<h2 id="cache-getToken">getToken()</h2>
<p>Returns the unique token for the current query, that will be used to save and retrieve a cache file.</p>
<pre><code class="language-php">function getToken(): string</code></pre>
<h3>Return value</h3>
<p>The unique token for the current query as a <code>string</code>.</p>
<h2 id="cache-delete">delete()</h2>
<p>Deletes the cache file for the current query.</p>
<pre><code class="language-php">function delete()</code></pre>
<h2 id="cache-deleteAll">deleteAll()</h2>
<p>Delete all cache files of current store.</p>
<pre><code class="language-php">function deleteAll()</code></pre>
<h2 id="cache-deleteAllWithNoLifetime">deleteAllWithNoLifetime()</h2>
<p>Delete all cache files that have no lifetime (null) of current store.</p>
<pre><code class="language-php">function deleteAllWithNoLifetime()</code></pre>
<h2 id="cache-set">set()</h2>
<p>Set and cache the content for the current query / token.</p>
<pre><code class="language-php">function set(array $content)</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$content: array</h1>
<p>The content that will be cached.</p>
</li>
</ol>
<h2 id="cache-get">get()</h2>
<p>Retrieve the content of the cache file for the current query / token.</p>
<pre><code class="language-php">function get(): array|null</code></pre>
<h3>Return value</h3>
<p>The content as an <code>array</code> or <code>null</code> if no cache file found.</p>
<h2 id="cache-getCachePath">getCachePath()</h2>
<p>Returns the path to the cache directory.</p>
<pre><code class="language-php">function getCachePath(): string</code></pre>
<h2 id="cache-setLifetime">setLifetime()</h2>
<p>Set the lifetime for the current query / token.</p>
<pre><code class="language-php">function setLifetime(int|null $lifetime): Cache</code></pre>
<h3>Parameters</h3>
<ol>
<li>
<h1>$lifetime: int|null</h1>
<ul>
<li><code>int</code> in seconds. <code>0</code> means infinite</li>
<li><code>null</code> no cache lifetime</li>
<li>Cache gets deleted on every update / delete / insert.</li>
</ul>
</li>
</ol>
<h2 id="cache-getLifetime">getLifetime()</h2>
<p>Get the lifetime for the current query / token.</p>
<pre><code class="language-php">function getLifetime(): int|null</code></pre>
<h3>Return value</h3>
<p>Either <code>int</code> &gt;= 0 in seconds, where <code>0</code> means infinite, or <code>null</code>.</p>
            <div class="editlink" 
              file="cache.md" 
              version="2.14">
            </div>
          </div>
        
          <div class="intro" id="block_reference">
            <h1>Reference</h1>
<p>This page contains a brief overview of all the classes and their methods. For more detailed information please visit the other documentation pages.</p>
<h2>Store</h2>
<p>The Store class is the beginning point and handles everything regarding store configuration. It also provides all methods needed for simple queries.</p>
<p>Create a new Store object. (Internally it creates a new store folder if it doesn't exist)</p>
<pre><code class="language-php">function __construct(string $storeName, string $databasePath, array $configuration = [])</code></pre>
<p>Returns a new <code>QueryBuilder</code> object.</p>
<pre><code class="language-php">function createQueryBuilder(): QueryBuilder</code></pre>
<p>Change the destination of the store object.</p>
<pre><code class="language-php">function changeStore(string $storeName, string $databasePath = null, array $configuration = []): Store</code></pre>
<p>Create/Insert a new document in the store.<br/>
Returns the inserted document with it's new and unique _id.</p>
<pre><code class="language-php">function insert(array $data): array</code></pre>
<p>Create/Insert many documents in the store.<br/>
Returns the inserted documents with their new and unique _id.</p>
<pre><code class="language-php">function insertMany(array $data): array</code></pre>
<p>Retrieve all documents of that store.</p>
<pre><code class="language-php">function findAll(array $orderBy = null, int $limit = null, int $offset = null): array</code></pre>
<p>Retrieve one document by its _id. Very fast because it finds the document by its file path.</p>
<pre><code class="language-php">function findById(int|string $id): array|null</code></pre>
<p>Retrieve one or multiple documents.</p>
<pre><code class="language-php">function findBy(array $criteria, array $orderBy = null, int $limit = null, int $offset = null): array</code></pre>
<p>Retrieve one document.</p>
<pre><code class="language-php">function findOneBy(array $criteria): array|null</code></pre>
<p>Do a fulltext like search against one or multiple fields.</p>
<pre><code class="language-php">function search(array $fields, string $query, array $orderBy = null, int $limit = null, int $offset = null): array</code></pre>
<p>Update parts of one document.</p>
<pre><code class="language-php">function updateById(int|string $id, array $updatable): array|false</code></pre>
<p>Update one or multiple documents.</p>
<pre><code class="language-php">function update(array $updatable): bool</code></pre>
<p>Create/Insert a new document in the store or update an existing one.<br/>
Returns the inserted/ updated document.</p>
<pre><code class="language-php">function updateOrInsert(array $data): array</code></pre>
<p>Create/Insert many documents in the store or update existing ones.<br/>
Returns the inserted/ updated documents.</p>
<pre><code class="language-php">function updateOrInsertMany(array $data): array</code></pre>
<p>Delete one or multiple documents.</p>
<pre><code class="language-php">function deleteBy(array $criteria, int $returnOption = Query::DELETE_RETURN_BOOL): bool|array|null</code></pre>
<p>Delete one document by its _id. Very fast because it deletes the document by its file path.</p>
<pre><code class="language-php">function deleteById(int|string $id): bool</code></pre>
<p>Remove fields from one document by its primary key.</p>
<pre><code class="language-php">function removeFieldsById($id, array $fieldsToRemove): array|false</code></pre>
<p>Returns the amount of documents in the store.</p>
<pre><code class="language-php">function count(): int</code></pre>
<p>Return the last created store object ID.</p>
<pre><code class="language-php">function getLastInsertedId(): int</code></pre>
<p>Deletes a store and wipes all the data and cache it contains.</p>
<pre><code class="language-php">function deleteStore(): bool</code></pre>
<p>Get the name of the store.</p>
<pre><code class="language-php">function getStoreName(): string</code></pre>
<p>Get the path to the database folder.</p>
<pre><code class="language-php">function getDatabasePath(): string</code></pre>
<p>Get the path to the store. (including store name)</p>
<pre><code class="language-php">function getStorePath(): string</code></pre>
<p>Get the name of the field used as the primary key.</p>
<pre><code class="language-php">function getPrimaryKey(): string</code></pre>
<p>This method is used internally. Returns if caching is enabled store wide.</p>
<pre><code class="language-php">function _getUseCache(): bool</code></pre>
<p>This method is used internally. Returns the search options of the store.</p>
<pre><code class="language-php">function _getSearchOptions(): array</code></pre>
<p>This method is used internally. Returns the store wide default cache lifetime.</p>
<pre><code class="language-php">function _getDefaultCacheLifetime(): null|int</code></pre>
<p>Get the location (directory path) of the store.<br/>
üö® Deprecated since version 2.7, use <code>getDatabasePath</code> instead.</p>
<pre><code class="language-php">function getDataDirectory(): string</code></pre>
<h2>QueryBuilder</h2>
<p>The QueryBuilder class handles everything regarding query creation like for example the where or join methods.</p>
<p>Create a new QueryBuilder object.</p>
<pre><code class="language-php">function __construct(Store $store)</code></pre>
<p>Returns a new <code>Query</code> object which can be used to execute the query build.</p>
<pre><code class="language-php">function getQuery(): Query</code></pre>
<p>Select specific fields.</p>
<pre><code class="language-php">function select(string[] $fieldNames): QueryBuilder</code></pre>
<p>Exclude specific fields.</p>
<pre><code class="language-php">function except(string[] $fieldNames): QueryBuilder</code></pre>
<p>Add &quot;where&quot; condition to filter data. Can be used multiple times. All additional uses add an &quot;and where&quot; condition.</p>
<pre><code class="language-php">function where(array $conditions): QueryBuilder</code></pre>
<p>Add or-where conditions to filter data.</p>
<pre><code class="language-php">function orWhere($conditions): QueryBuilder</code></pre>
<p>Set the amount of data record to skip.</p>
<pre><code class="language-php">function skip(int|string $skip = 0): QueryBuilder</code></pre>
<p>Set the amount of data record to limit.</p>
<pre><code class="language-php">function limit(int|string $limit = 0): QueryBuilder</code></pre>
<p>Set the sort order.</p>
<pre><code class="language-php">function orderBy(array $criteria): QueryBuilder</code></pre>
<p>Group documents using one or multiple fields.</p>
<pre><code class="language-php">function groupBy(array $groupByFields, string $counterKeyName = null, bool $allowEmpty = false): QueryBuilder</code></pre>
<p>The <code>having()</code> method was added, because the <code>where()</code> and <code>orWhere()</code> methods do not consider select functions and grouped documents.<br/>
As you can see in the <a class="gotoblock" href="#/execution-order#query">Order of query execution</a> documentation you can use <code>having()</code> to further filter the result after <code>join()</code>, <code>search()</code>, <code>select()</code> and <code>groupBy()</code> is applied.</p>
<pre><code class="language-php">function having(array $criteria): QueryBuilder</code></pre>
<p>Do a fulltext like search against one or more fields.</p>
<pre><code class="language-php">function search(string|array $fields, string $query, array $options = []): QueryBuilder</code></pre>
<p>Join current store with another one. Can be used multiple times to join multiple stores.</p>
<pre><code class="language-php">function join(Closure $joinFunction, string $propertyName): QueryBuilder</code></pre>
<p>Return distinct values.</p>
<pre><code class="language-php">function distinct(string|array $fields = []): QueryBuilder</code></pre>
<p>Use caching for current query</p>
<pre><code class="language-php">function useCache(int $lifetime = null): QueryBuilder</code></pre>
<p>Disable caching for current query.</p>
<pre><code class="language-php">function disableCache(): QueryBuilder</code></pre>
<p>Re-generate the cache for the query.</p>
<pre><code class="language-php">function regenerateCache(): QueryBuilder</code></pre>
<p>This method is used internally. Returns a an array used to generate a unique token for the current query.</p>
<pre><code class="language-php">function _getCacheTokenArray(): array</code></pre>
<p>This method is used internally. Returns an array containing all information needed to execute an query.</p>
<pre><code class="language-php">function _getConditionProperties(): array</code></pre>
<p>This method is used internally. Returns the Store object used to create the QueryBuilder object.</p>
<pre><code class="language-php">function _getStore(): Store</code></pre>
<p>Add nested where conditions to filter data.<br/>
üö® Deprecated since version 2.3, use <code>where</code> and <code>orWhere</code> instead</p>
<pre><code class="language-php">function nestedWhere($conditions): QueryBuilder</code></pre>
<p>Add &quot;in&quot; condition to filter data.<br/>
üö® Deprecated since version 2.4, use &quot;in&quot; condition instead</p>
<pre><code class="language-php">function in(string $fieldName, array $values = []): QueryBuilder</code></pre>
<p>Add &quot;not in&quot; condition to filter data.<br/>
üö® Deprecated since version 2.4, use &quot;not in&quot; condition instead</p>
<pre><code class="language-php">function notIn(string $fieldName, array $values = []): QueryBuilder</code></pre>
<h2>Query</h2>
<p>This class handles everything regarding query execution like fetch / first / exists.</p>
<p>Create a new Query object. (Internally it creates a new Cache object)</p>
<pre><code class="language-php">function __construct(QueryBuilder $queryBuilder)</code></pre>
<p>Get the <code>Cache</code> object.</p>
<pre><code class="language-php">function getCache(): Cache</code></pre>
<p>Execute Query and get Results.</p>
<pre><code class="language-php">function fetch(): array</code></pre>
<p>Check if data is found.</p>
<pre><code class="language-php">function exists(): bool</code></pre>
<p>Return the first document. (More efficient than <code>fetch</code> but <code>orderBy</code> does not work)</p>
<pre><code class="language-php">function first(): array</code></pre>
<p>Update one or multiple documents, based on the current query.</p>
<pre><code class="language-php">function update(array $updatable, bool $returnUpdatedDocuments = false): array|bool</code></pre>
<p>Deletes matched documents.</p>
<pre><code class="language-php">function delete(int $returnOption = Query::DELETE_RETURN_BOOL): bool|array|int</code></pre>
<p>Remove fields of one or multiple documents based on current query.</p>
<pre><code class="language-php">function removeFields(array $fieldsToRemove): bool</code></pre>
<h2>Cache</h2>
<p>This class handles everything regarding caching like for example cache deletion.</p>
<p>Create a new Cache object.</p>
<pre><code class="language-php">function __construct(Query $storePath, array &amp;$cacheTokenArray, int|null $cacheLifetime)</code></pre>
<p>Retrieve the cache lifetime for current query.</p>
<pre><code class="language-php">function getLifetime(): null|int</code></pre>
<p>Retrieve the path to cache folder of current store.</p>
<pre><code class="language-php">function getCachePath(): string</code></pre>
<p>Retrieve the cache token used as filename to store cache file.</p>
<pre><code class="language-php">function getToken(): string</code></pre>
<p>Delete all cache files for current store.</p>
<pre><code class="language-php">function deleteAll()</code></pre>
<p>Delete all cache files with no lifetime (null) in current store.</p>
<pre><code class="language-php">function deleteAllWithNoLifetime()</code></pre>
<p>Save content for current query as a cache file.</p>
<pre><code class="language-php">function set(array $content)</code></pre>
<p>Retrieve content of cache file.</p>
<pre><code class="language-php">function get(): array|null</code></pre>
<p>Delete cache file/s for current query.</p>
<pre><code class="language-php">function delete()</code></pre>
            <div class="editlink" 
              file="reference.md" 
              version="2.14">
            </div>
          </div>
        
          <div class="intro" id="block_release-notes">
            <h1>üéâ Release Notes</h1>
<h2>üì¢ Optimizations, new query methods and more control</h2>
<p>SleekDB 2.X comes with so many important optimizations and other features that make it faster and more mature. This is the recommended SleekDB release version for new projects, and if you are using an older version consider upgrading as soon as possible.</p>
<h2>Summary</h2>
<ul>
<li><a class="gotoblock" href="#/release-notes#2.14">Changes from 2.13 to 2.14</a></li>
<li><a class="gotoblock" href="#/release-notes#2.13">Changes from 2.12 to 2.13</a></li>
<li><a class="gotoblock" href="#/release-notes#2.12">Changes from 2.11 to 2.12</a></li>
<li><a class="gotoblock" href="#/release-notes#2.11">Changes from 2.10 to 2.11</a></li>
<li><a class="gotoblock" href="#/release-notes#2.10">Changes from 2.9 to 2.10</a></li>
<li><a class="gotoblock" href="#/release-notes#2.9">Changes from 2.8 to 2.9</a></li>
<li><a class="gotoblock" href="#/release-notes#2.8">Changes from 2.7 to 2.8</a></li>
<li><a class="gotoblock" href="#/release-notes#2.7">Changes from 2.6 to 2.7</a></li>
<li><a class="gotoblock" href="#/release-notes#2.6">Changes from 2.5 to 2.6</a></li>
<li><a class="gotoblock" href="#/release-notes#2.5">Changes from 2.4 to 2.5</a></li>
<li><a class="gotoblock" href="#/release-notes#2.4">Changes from 2.3 to 2.4</a></li>
<li><a class="gotoblock" href="#/release-notes#2.3">Changes from 2.2 to 2.3</a></li>
<li><a class="gotoblock" href="#/release-notes#2.2">Changes from 2.1 to 2.2</a></li>
<li><a class="gotoblock" href="#/release-notes#2.1">Changes from 2.0 to 2.1</a></li>
<li><a class="gotoblock" href="#/release-notes#2.0">Changes from 1.5 to 2.0</a></li>
</ul>
<h2 id="release-notes-2.14">Changes from 2.13 to 2.14</h2>
<ul>
<li>
<h1>üö® Fixed bug regarding internal escaping when using <code>LIKE</code> and <code>NOT LIKE</code></h1>
</li>
<li>
<h1>üåà New ability to escape wildcards</h1>
<ul>
<li><a class="gotoblock" href="/#/criteria#criteria">$criteria</a></li>
</ul>
</li>
</ul>
<h2 id="release-notes-2.13">Changes from 2.12 to 2.13</h2>
<ul>
<li>
<h1>‚ú® New EXISTS condition</h1>
<ul>
<li>
<h3>With this new condition you can finally query for documents that contain or do not contain a specific field.</h3>
<ul>
<li><a class="gotoblock" href="/#/criteria">$criteria</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="release-notes-2.12">Changes from 2.11 to 2.12</h2>
<ul>
<li>
<h1>üö® Deprecated <a href="#/configurations#timeout"><code>timeout</code></a> configuration</h1>
<p>Set it to <code>false</code> and if needed use <a href="https://www.php.net/manual/en/function.set-time-limit.php" target="_blank" rel="noopener nofollow">set_time_limit()</a> in your own code!</p>
</li>
</ul>
<h2 id="release-notes-2.11">Changes from 2.10 to 2.11</h2>
<ul>
<li>
<h1>‚ú® New configuration option</h1>
<ul>
<li>
<h3>Set &quot;timeout&quot; to <code>false</code> if you can't use or don't want to use set_time_limit() function.</h3>
<ul>
<li><a class="gotoblock" href="#/configurations#timeout">timeout</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="release-notes-2.10">Changes from 2.9 to 2.10</h2>
<ul>
<li>
<h1>‚ú® New functionality!</h1>
<ul>
<li>
<h3>Create and use your own select functions</h3>
<ul>
<li><a class="gotoblock" href="#/query-builder#select">QueryBuilder-&gt;select()</a></li>
</ul>
</li>
<li>
<h3>Filter documents with your own custom functions</h3>
<ul>
<li><a class="gotoblock" href="#/criteria">$criteria</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="release-notes-2.9">Changes from 2.8 to 2.9</h2>
<ul>
<li>
<h1>‚ú® New functionality!</h1>
<ul>
<li>
<h3>New select functions like <code>CONCAT</code>, <code>ROUND</code> and much more!</h3>
<ul>
<li><a class="gotoblock" href="#/query-builder#select">QueryBuilder-&gt;select()</a></li>
</ul>
</li>
<li>
<h3>New <code>CONTAINS</code> and <code>NOT CONTAINS</code> conditions available!</h3>
<ul>
<li><a class="gotoblock" href="#/criteria">$criteria</a></li>
</ul>
</li>
<li>
<h3>New <code>Store-&gt;updateOrInsert()</code> and <code>Store-&gt;updateOrInsertMany()</code> methods!</h3>
<ul>
<li><a class="gotoblock" href="#/edit-data#updateOrInsert">Documentation of <code>updateOrInsert()</code> method</a></li>
<li><a class="gotoblock" href="#/edit-data#updateOrInsertMany">Documentation of <code>updateOrInsertMany()</code> method</a></li>
</ul>
</li>
</ul>
</li>
<li>
<h1>üìù New documentation page!</h1>
<ul>
<li>
<h3>Order of execution description and diagram to better understand the internals!</h3>
<ul>
<li><a class="gotoblock" href="#/execution-order">&quot;Order of Execution&quot;</a></li>
</ul>
</li>
</ul>
</li>
<li>
<h1>üåà Improved functionality!</h1>
<ul>
<li>
<h3><code>findAll()</code> now accept orderBy, limit and offset as optional parameters!</h3>
<ul>
<li><a class="gotoblock" href="#/fetch-data#findAll">Documentation of <code>findAll()</code> method</a></li>
</ul>
</li>
<li>
<h3><code>limit()</code> and <code>skip()</code> now accept strings!</h3>
<ul>
<li><a class="gotoblock" href="#/query-builder#limit">Documentation of <code>limit()</code> method</a></li>
<li><a class="gotoblock" href="#/query-builder#skip">Documentation of <code>skip()</code> method</a></li>
</ul>
</li>
<li>
<h3>Having can now be used without Group-By!</h3>
<ul>
<li><a class="gotoblock" href="#/query-builder#having">QueryBuilder-&gt;having()</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="release-notes-2.8">Changes from 2.7 to 2.8</h2>
<ul>
<li>
<h1>‚ú® New functionality!</h1>
<ul>
<li>
<h3>Retrieve the amount of documents stored in a fast way.</h3>
<ul>
<li><a class="gotoblock" href="#/fetch-data#count">Store-&gt;count()</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="release-notes-2.7">Changes from 2.6 to 2.7</h2>
<ul>
<li>
<h1>üö® New requirement!</h1>
<ul>
<li>
<h3>In order to implement the new search functionality we had to add a new PHP module requirement to SleekDB.</h3>
<ul>
<li><strong><code>ext-mbstring</code></strong></li>
</ul>
</li>
</ul>
</li>
<li>
<h1>üö® Deprecated method!</h1>
<ul>
<li>
<h3>The <code>getDataDirectory()</code> method of the <code>Store</code> class is now deprecated. Use <code>getDatabasePath()</code> instead!</h3>
</li>
</ul>
</li>
<li>
<h1>üìù New documentation page!</h1>
<ul>
<li>
<h3>This new documentation page contains some complete code examples!</h3>
<ul>
<li><a class="gotoblock" href="#/complete-examples">&quot;Some complete code examples&quot;</a></li>
</ul>
</li>
</ul>
</li>
<li>
<h1>‚ú® New functionality!</h1>
<ul>
<li>
<h3>SleekDB now has multiple enhanced searching algorithms with scored results!</h3>
<ul>
<li><a class="gotoblock" href="#/searching">New &quot;Searching&quot; documentation</a></li>
</ul>
</li>
<li>
<h3>New store wide search configurations!</h3>
<ul>
<li><a class="gotoblock" href="#/configurations">Configure the search behavion when creating a <code>Store</code> object.</a></li>
</ul>
</li>
<li>
<h3>New shorthand <code>search()</code> method for <code>Store</code> class!</h3>
<ul>
<li><a class="gotoblock" href="#/searching#store">Documentation of new shorthand <code>search()</code> method!</a></li>
</ul>
</li>
<li>
<h3>New comparisons!</h3>
<ul>
<li>
<h4>Type safe</h4>
<ul>
<li><code>===</code></li>
<li><code>!==</code></li>
</ul>
</li>
<li>
<h4>Type unsafe</h4>
<ul>
<li><code>==</code></li>
<li><code>&lt;&gt;</code></li>
</ul>
</li>
</ul>
</li>
<li>
<h3>Now you can easily remove fields from a document!</h3>
<ul>
<li><a class="gotoblock" href="#/edit-data#removeFieldsById">removeFieldsById()</a></li>
<li><a class="gotoblock" href="#/query#removeFields">removeFields()</a></li>
</ul>
</li>
</ul>
</li>
<li>
<h1>üåà Improved functionality!</h1>
<ul>
<li>
<h3>Configuration on a query by query base with the <code>search()</code> method of the <code>QueryBuilder</code> class</h3>
<ul>
<li><a class="gotoblock" href="#/query-builder#search">Documentation of <code>search()</code> method</a></li>
</ul>
</li>
<li>
<h3>All *byId methods now also accept strings as id!</h3>
<p>For more details please visit the corresponding documentation pages:</p>
<ul>
<li><a class="gotoblock" href="#/fetch-data#findById">findById()</a></li>
<li><a class="gotoblock" href="#/edit-data#updateById">updateById()</a></li>
<li><a class="gotoblock" href="#/delete-data#deleteById">deleteById()</a></li>
<li><a class="gotoblock" href="#/edit-data#removeFieldsById">removeFieldsById()</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="release-notes-2.6">Changes from 2.5 to 2.6</h2>
<ul>
<li>
<h1>‚ú® New functionality</h1>
<ul>
<li>
<h3>SleekDB now can group results and filter grouped results!</h3>
<ul>
<li><a class="gotoblock" href="#/query-builder#groupBy">groupBy()</a></li>
<li><a class="gotoblock" href="#/query-builder#having">having()</a></li>
</ul>
</li>
<li>
<h3>Easily update parts of a document with its id!</h3>
<ul>
<li><a class="gotoblock" href="#/edit-data#updateById">updateById()</a></li>
</ul>
</li>
<li>
<h3>Use one Store object to manage multiple stores!</h3>
<ul>
<li><a class="gotoblock" href="#/advanced">changeStore()</a></li>
</ul>
</li>
</ul>
</li>
<li>
<h1>üåà Improved functionality</h1>
<ul>
<li>
<h3>select()</h3>
<p>For more details please visit the <a class="gotoblock" href="#/query-builder#select">documentation of select</a>.</p>
<ul>
<li>The select method now accepts aliase!</li>
<li>When using select in conjunction with <code>groupBy</code> you can use functions!</li>
<li>You can now select nested fields!</li>
</ul>
</li>
<li>
<h3>except()</h3>
<p>For more details please visit the <a class="gotoblock" href="#/query-builder#except">documentation of except</a>.</p>
<ul>
<li>You can now exclude nested fields!</li>
</ul>
</li>
<li>
<h3>update() of Query class</h3>
<p>For more details please visit the <a class="gotoblock" href="#/query#update">documentation of update</a>.</p>
<ul>
<li>You can now update nested fields!</li>
<li>Can now return the updated results!</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="release-notes-2.5">Changes from 2.4 to 2.5</h2>
<ul>
<li>
<h1>‚ú® New conditions:</h1>
<p>The following conditions can now be used with the <code>findBy()</code>, <code>findOneBy()</code>, <code>deleteBy()</code>, <code>where()</code> and <code>orWhere()</code> methods!</p>
<ul>
<li><code>BETWEEN</code></li>
<li><code>NOT BETWEEN</code></li>
</ul>
</li>
<li>
<h1>üåà SleekDB now accepts DateTime objects to filter data!</h1>
<p>The methods that accept DateTime objects as a value to check against are:</p>
<ul>
<li><code>findBy</code></li>
<li><code>findOneBy</code></li>
<li><code>deleteBy</code></li>
<li><code>where</code></li>
<li><code>orWhere</code></li>
</ul>
<p>The conditions you can use DateTime objects with are:</p>
<ul>
<li><code>=</code></li>
<li><code>!=</code></li>
<li><code>&gt;</code></li>
<li><code>&gt;=</code></li>
<li><code>&lt;=</code></li>
<li><code>IN</code></li>
<li><code>NOT IN</code></li>
<li><code>BETWEEN</code></li>
<li><code>NOT BETWEEN</code></li>
</ul>
<p>Visit our new <a class="gotoblock" href="#/dates">Working with Dates documentation</a> page to learn more about date handling.</p>
</li>
</ul>
<h2 id="release-notes-2.4">Changes from 2.3 to 2.4</h2>
<ul>
<li>
<h1>üö® Deprecated in() &amp; notIn() methods</h1>
<p>They will be removed with the next major update.<br/>
Please <strong>use the new conditions <code>"in"</code> and <code>"not in"</code> instead</strong>.<br/>
Available with the <code>findBy()</code>, <code>findOneBy</code>, <code>deleteBy()</code>, <code>where()</code> and <code>orWhere()</code> methods since version 2.3.<br/>
See <a rel="noopener nofollow" href="https://github.com/rakibtg/SleekDB/issues/118" target="_blank">#118</a> for more details.</p>
</li>
</ul>
<h2 id="release-notes-2.3">Changes from 2.2 to 2.3</h2>
<ul>
<li>
<h1>üö® Deprecated nestedWhere() method</h1>
<p>We are sorry to deprecate the <code>nestedWhere()</code> method so short after it's release.<br/>
It will be removed with the next major update.<br/>
Please use <code>where()</code> and <code>orWhere()</code> instead.</p>
</li>
<li>
<h1>üåü Nested where statements everywhere!</h1>
<p>The <code>findBy()</code>, <code>findOneBy</code>, <code>deleteBy()</code>, <code>where()</code> and <code>orWhere()</code> methods now can handle nested statements!</p>
<table>
<tr>
  <td>
    <ul>
      <li><code>findBy()</code></li>
      <li><code>findOneBy()</code></li>
    </ul>
  </td>
  <td>
    <a class="gotoblock" href="#/fetch-data">Fetch Data documentation</a>
  </td>
</tr>
<tr>
  <td>
    <ul>
      <li><code>deleteBy()</code></li>
    </ul>
  </td>
  <td>
    <a class="gotoblock" href="#/delete-data">Delete Data documentation</a>
  </td>
</tr>
<tr>
  <td>
    <ul>
      <li><code>where()</code></li>
      <li><code>orWhere()</code></li>
    </ul>
  </td>
  <td>
    <a class="gotoblock" href="#/query-builder">QueryBuilder documentation</a>
  </td>
</tr>
</table>
</li>
<li>
<h1>‚ú® New conditions</h1>
<ul>
<li><code>not like</code></li>
<li><code>in</code></li>
<li><code>not in</code></li>
</ul>
<p>These new conditions can now be used with the <code>findBy()</code>, <code>findOneBy()</code>, <code>deleteBy()</code>, <code>where()</code> and <code>orWhere()</code> methods!</p>
</li>
<li>
<h1>üí° Logical connection</h1>
<p>All condition methods are now logically connected and the order when using them is now important.<br/>
See <a rel="noopener nofollow" href="https://github.com/rakibtg/SleekDB/issues/114" target="_blank">#114</a> for more details.</p>
</li>
</ul>
<h2 id="release-notes-2.2">Changes from 2.1 to 2.2</h2>
<ul>
<li>
<h1>üóÉ Order by multiple fields</h1>
<p>Now the <code>orderBy()</code> method of the QueryBuilder accepts multiple fields to sort the result.<br/>
Look at the updated orderBy section of the <a class="gotoblock" href="#/query-builder">QueryBuilder documentation</a> to learn more.</p>
</li>
<li>
<h1>üîç New nestedWhere() method</h1>
<p>With the new added <code>nestedWhere()</code> method you can now use much complexer where statements to filter data.<br/>
Look at the new nestedWhere section of the <a class="gotoblock" href="#/query-builder">QueryBuilder documentation</a> to learn more.</p>
</li>
</ul>
<h2 id="release-notes-2.1">Changes from 2.0 to 2.1</h2>
<ul>
<li>
<h1>‚öôÔ∏è New Configuration</h1>
<p>With the new <code>primary_key</code> configuration you can now change the _id key name to everything you want. To see how to use the new configuration option visit the <a class="gotoblock" href="/#/configurations">Configurations</a> page.</p>
</li>
</ul>
<h2 id="release-notes-2.0">Changes from 1.5 to 2.0</h2>
<ul>
<li>
<h1>üîé Improving document discovery process</h1>
<p>Added better file locking support with reduced nested loops for finding documents. Added methods that can be used to easily find a document without searching for entire available JSON files of a store.</p>
</li>
<li>
<h1>Support for PHP &gt;= 7.0</h1>
<p>The support of PHP 5 is dropped to provide more modern features.</p>
</li>
<li>
<h1>‚ú® New query methods</h1>
<ul>
<li><code>first()</code></li>
<li><code>exists()</code></li>
<li><code>select()</code></li>
<li><code>except()</code></li>
<li><code>distinct()</code></li>
<li><code>join()</code></li>
<li><code>findAll()</code></li>
<li><code>findById()</code></li>
<li><code>findBy()</code></li>
<li><code>findOneBy()</code></li>
<li><code>updateBy()</code></li>
<li><code>deleteBy()</code></li>
<li><code>deleteById()</code></li>
</ul>
</li>
<li>
<h1>Improved Code Quality</h1>
<p>We isolated most of the existing logics into different classes to make the codebase easy to understand and easy to maintain.</p>
</li>
<li>
<h1>Unit Testing</h1>
<p>There was some concern among developers as it was lacking UNIT Testing, now its added!</p>
</li>
<li>
<h1>SleekDB class now deprecated</h1>
<p>We beliefe that downwards compatibility is very important.</p>
<p>That's why we always try our best to keep SleekDB as downwards compatible as possible and avoid breaking changes.</p>
<p>Unfortunatelly we had to refactor and rewrite the whole SleekDB project to make it future proof and keep it maintainable. As a consequence the SleekDB class is now deprecated with version 2.0 and will be removed with version 3.0.</p>
<h3>A new era for SleekDB begins!</h3>
</li>
<li>
<h1>Better Caching Solution</h1>
<p>Data caching has been improved significantly.</p>
<ul>
<li>Add custom expiry of a cache file with lifetime.</li>
<li>Ability of query specific caching rules.</li>
</ul>
</li>
</ul>
<h2>Issues</h2>
<ul>
<li>Deprecate SleekDB Class (<a rel="noopener nofollow" href="https://github.com/rakibtg/SleekDB/issues/84" target="_blank">#84</a>)</li>
<li>first and exists methods does not use cache (<a rel="noopener nofollow" href="https://github.com/rakibtg/SleekDB/issues/82" target="_blank">#82</a>)</li>
<li>Make where and orWhere just accept one array (<a rel="noopener nofollow" href="https://github.com/rakibtg/SleekDB/issues/80" target="_blank">#80</a>)</li>
<li>Make dataDir required (<a rel="noopener nofollow" href="https://github.com/rakibtg/SleekDB/issues/79" target="_blank">#79</a>)</li>
<li>Add update &amp; delete to Store class <a rel="noopener nofollow" href="https://github.com/rakibtg/SleekDB/issues/78" target="_blank">#78</a>)</li>
<li>Change delete method of Query class to accept return options (<a rel="noopener nofollow" href="https://github.com/rakibtg/SleekDB/issues/77" target="_blank">#77</a>)</li>
<li>Add find methods to new Store class to make the QueryBuilder optional for simple queries. (<a rel="noopener nofollow" href="https://github.com/rakibtg/SleekDB/issues/75" target="_blank">#75</a>)</li>
<li>Allow to query on read-only file system (<a rel="noopener nofollow" href="https://github.com/rakibtg/SleekDB/issues/67" target="_blank">#67</a>)</li>
<li>Use &quot;results&quot; property instead of returning data from methods (<a rel="noopener nofollow" href="https://github.com/rakibtg/SleekDB/issues/59" target="_blank">#59</a>)</li>
<li>Return the first item only (<a rel="noopener nofollow" href="https://github.com/rakibtg/SleekDB/issues/56" target="_blank">#56</a>)</li>
<li>Check if data exists (<a rel="noopener nofollow" href="https://github.com/rakibtg/SleekDB/issues/54" target="_blank">#54</a>)</li>
<li>update return value (<a rel="noopener nofollow" href="https://github.com/rakibtg/SleekDB/issues/51" target="_blank">#51</a>)</li>
<li>delete status (<a rel="noopener nofollow" href="https://github.com/rakibtg/SleekDB/issues/48" target="_blank">#48</a>)</li>
<li>Extend not possible due to private helper methods (<a rel="noopener nofollow" href="https://github.com/rakibtg/SleekDB/issues/44" target="_blank">#44</a>)</li>
<li>JOIN feature (<a rel="noopener nofollow" href="https://github.com/rakibtg/SleekDB/issues/42" target="_blank">#42</a>)</li>
<li>Return distincted value (<a rel="noopener nofollow" href="https://github.com/rakibtg/SleekDB/issues/41" target="_blank">#41</a>)</li>
<li>Suppress Key on fetch (<a rel="noopener nofollow" href="https://github.com/rakibtg/SleekDB/issues/38" target="_blank">#38</a>)</li>
<li>Like Condition (<a rel="noopener nofollow" href="https://github.com/rakibtg/SleekDB/issues/34" target="_blank">#34</a>)</li>
<li>Better code base (<a rel="noopener nofollow" href="https://github.com/rakibtg/SleekDB/issues/32" target="_blank">#32</a>)</li>
<li>OR Condition Query (<a rel="noopener nofollow" href="https://github.com/rakibtg/SleekDB/issues/31" target="_blank">#31</a>)</li>
<li>Possibility of duplicate ID‚Äôs (<a rel="noopener nofollow" href="https://github.com/rakibtg/SleekDB/issues/30" target="_blank">#30</a>)</li>
</ul>
            <div class="editlink" 
              file="release-notes.md" 
              version="2.14">
            </div>
          </div>
        
          <div class="intro" id="block_contributing">
            <h1>Contributing</h1>
<ul>
<li>Fork SleekDB</li>
<li>Create your feature branch <code>git checkout -b feature/my-new-feature</code></li>
<li>Commit your changes <code>git commit -am 'Added some feature'</code></li>
<li>Push to the branch <code>git push origin feature/my-new-feature</code></li>
<li>Create new Pull Request targeting <code>dev</code> branch</li>
</ul>
<p>Please write details about your PR.</p>
            <div class="editlink" 
              file="contributing.md" 
              version="2.14">
            </div>
          </div>
        
          <div class="intro" id="block_contact">
            <h1>Contact</h1>
<p>We would love to see how you are using the database, if you have implemented something or how it is working for you.</p>
<p>What changes will make you more interested.</p>
<p>If you want to submit a bug feel free to create a new <a rel="noopener nofollow" href="https://github.com/rakibtg/SleekDB/issues" target="_blank">issue</a> or email me @ rakibtg [-at-] gmail [-dot-] com</p>
<h2>About</h2>
<p>Let us know with a tweet if you love or hate SleekDB üòÑ, or if you have any question mail me or tweet to my twitter handle.</p>
            <div class="editlink" 
              file="contact.md" 
              version="2.14">
            </div>
          </div>
        
          <div class="intro" id="block_versions">
            <h1>Versions</h1>
<ul>
<li><strong><a href="/">2.15</a> (Actively Maintained Version)</strong></li>
<li><strong><a href="/versions/2.14/">2.14</a></strong></li>
<li><strong><a href="/versions/2.13/">2.13</a></strong></li>
<li><strong><a href="/versions/2.12/">2.12</a></strong></li>
<li><strong><a href="/versions/2.10/">2.11</a></strong></li>
<li><strong><a href="/versions/2.10/">2.10</a></strong></li>
<li><strong><a href="/versions/2.9/">2.9</a></strong></li>
<li><strong><a href="/versions/2.8/">2.8</a></strong></li>
<li><strong><a href="/versions/2.7/">2.7</a></strong></li>
<li><strong><a href="/versions/2.6/">2.6</a></strong></li>
<li><strong><a href="/versions/2.5/">2.5</a></strong></li>
<li><strong><a href="/versions/2.4/">2.4</a></strong></li>
<li><strong><a href="/versions/2.3/">2.3</a></strong></li>
<li><strong><a href="/versions/2.2/">2.2</a></strong></li>
<li><strong><a href="/versions/2.1/">2.1</a></strong></li>
<li><strong><a href="/versions/2.0/">2.0</a></strong></li>
<li><strong><a href="/versions/1.5/">1.5</a> (Bug Fixes Only)</strong></li>
</ul>
            <div class="editlink" 
              file="versions.md" 
              version="2.14">
            </div>
          </div>
        
            </div>
          </div>
        </div>
        
        <script src="/assets/app.js"></script>
        </body>
        </html>
      